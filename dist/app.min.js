!function i(a,s,c){function u(e,t){if(!s[e]){if(!a[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(l)return l(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var o=s[e]={exports:{}};a[e][0].call(o.exports,function(t){return u(a[e][1][t]||t)},o,o.exports,i,a,s,c)}return s[e].exports}for(var l="function"==typeof require&&require,t=0;t<c.length;t++)u(c[t]);return u}({1:[function(t,r,n){(function(Y,B){!function(t){if("object"==typeof n&&void 0!==r)r.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:void 0!==B?e=B:"undefined"!=typeof self&&(e=self),e.Promise=t()}}(function(){var t,e,r;return function i(a,s,c){function u(r,t){if(!s[r]){if(!a[r]){var e="function"==typeof _dereq_&&_dereq_;if(!t&&e)return e(r,!0);if(l)return l(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var o=s[r]={exports:{}};a[r][0].call(o.exports,function(t){var e=a[r][1][t];return u(e||t)},o,o.exports,i,a,s,c)}return s[r].exports}for(var l="function"==typeof _dereq_&&_dereq_,t=0;t<c.length;t++)u(c[t]);return u}({1:[function(t,e,r){"use strict";e.exports=function(t){var n=t._SomePromiseArray;function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,e,r){"use strict";var n;try{throw new Error}catch(t){n=t}var o=t("./schedule"),i=t("./queue"),a=t("./util");function s(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new i(16),this._normalQueue=new i(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=o}function c(t,e,r){this._lateQueue.push(t,e,r),this._queueTick()}function u(t,e,r){this._normalQueue.push(t,e,r),this._queueTick()}function l(t){this._normalQueue._pushOne(t),this._queueTick()}s.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},s.prototype.hasCustomScheduler=function(){return this._customScheduler},s.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},s.prototype.disableTrampolineIfNecessary=function(){a.hasDevTools&&(this._trampolineEnabled=!1)},s.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},s.prototype.fatalError=function(t,e){e?(Y.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),Y.exit(2)):this.throwLater(t)},s.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},a.hasDevTools?(s.prototype.invokeLater=function(t,e,r){this._trampolineEnabled?c.call(this,t,e,r):this._schedule(function(){setTimeout(function(){t.call(e,r)},100)})},s.prototype.invoke=function(t,e,r){this._trampolineEnabled?u.call(this,t,e,r):this._schedule(function(){t.call(e,r)})},s.prototype.settlePromises=function(t){this._trampolineEnabled?l.call(this,t):this._schedule(function(){t._settlePromises()})}):(s.prototype.invokeLater=c,s.prototype.invoke=u,s.prototype.settlePromises=l),s.prototype._drainQueue=function(t){for(;0<t.length();){var e=t.shift();if("function"==typeof e){var r=t.shift(),n=t.shift();e.call(r,n)}else e._settlePromises()}},s.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},s.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},s.prototype._reset=function(){this._isTickUsed=!1},e.exports=s,e.exports.firstLineError=n},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,r){"use strict";e.exports=function(i,a,s,c){var u=!1,r=function(t,e){this._reject(e)},l=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(r,r,null,this,t)},f=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},h=function(t,e){e.promiseRejectionQueued||this._reject(t)};i.prototype.bind=function(t){u||(u=!0,i.prototype._propagateFrom=c.propagateFromFunction(),i.prototype._boundValue=c.boundValueFunction());var e=s(t),r=new i(a);r._propagateFrom(this,1);var n=this._target();if(r._setBoundTo(e),e instanceof i){var o={promiseRejectionQueued:!1,promise:r,target:n,bindingPromise:e};n._then(a,l,void 0,r,o),e._then(f,h,void 0,r,o),r._setOnCancel(e)}else r._resolveCallback(n);return r},i.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},i.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},i.bind=function(t,e){return i.resolve(e).bind(t)}}},{}],4:[function(t,e,r){"use strict";var n;"undefined"!=typeof Promise&&(n=Promise);var o=t("./promise")();o.noConflict=function(){try{Promise===o&&(Promise=n)}catch(t){}return o},e.exports=o},{"./promise":22}],5:[function(t,e,r){"use strict";var n=Object.create;if(n){var o=n(null),i=n(null);o[" size"]=i[" size"]=0}e.exports=function(o){var n,i=t("./util"),a=i.canEvaluate;i.isIdentifier;function e(t,e){var r;if(null!=t&&(r=t[e]),"function"!=typeof r){var n="Object "+i.classString(t)+" has no method '"+i.toString(e)+"'";throw new o.TypeError(n)}return r}function r(t){return e(t,this.pop()).apply(t,this)}function s(t){return t[this]}function c(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}o.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(r,void 0,void 0,e,void 0)},o.prototype.get=function(t){var e;if("number"==typeof t)e=c;else if(a){var r=n(t);e=null!==r?r:s}else e=s;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(c,t,e){"use strict";t.exports=function(t,e,r,n){var o=c("./util"),i=o.tryCatch,a=o.errorObj,s=t._async;t.prototype.break=t.prototype.cancel=function(){if(!n.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var r=t._cancellationParent;if(null==r||!r._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=r}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),s.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){0<this._length()&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var r=0;r<t.length;++r)this._doInvokeOnCancel(t[r],e);else if(void 0!==t)if("function"==typeof t){if(!e){var n=i(t).call(this._boundValue());n===a&&(this._attachExtraTrace(n.e),s.throwLater(n.e))}}else t._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),s.invoke(this._doInvokeOnCancel,this,t)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,r){"use strict";e.exports=function(f){var h=t("./util"),p=t("./es5").keys,_=h.tryCatch,d=h.errorObj;return function(c,u,l){return function(t){var e=l._boundValue();t:for(var r=0;r<c.length;++r){var n=c[r];if(n===Error||null!=n&&n.prototype instanceof Error){if(t instanceof n)return _(u).call(e,t)}else if("function"==typeof n){var o=_(n).call(e,t);if(o===d)return o;if(o)return _(u).call(e,t)}else if(h.isObject(t)){for(var i=p(n),a=0;a<i.length;++a){var s=i[a];if(n[s]!=t[s])continue t}return _(u).call(e,t)}}return f}}}},{"./es5":13,"./util":36}],8:[function(t,e,r){"use strict";e.exports=function(i){var a=!1,r=[];function s(){this._trace=new s.CapturedTrace(c())}function c(){var t=r.length-1;if(0<=t)return r[t]}return i.prototype._promiseCreated=function(){},i.prototype._pushContext=function(){},i.prototype._popContext=function(){return null},i._peekContext=i.prototype._peekContext=function(){},s.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,r.push(this._trace))},s.prototype._popContext=function(){if(void 0!==this._trace){var t=r.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},s.CapturedTrace=null,s.create=function(){if(a)return new s},s.deactivateLongStackTraces=function(){},s.activateLongStackTraces=function(){var t=i.prototype._pushContext,e=i.prototype._popContext,r=i._peekContext,n=i.prototype._peekContext,o=i.prototype._promiseCreated;s.deactivateLongStackTraces=function(){i.prototype._pushContext=t,i.prototype._popContext=e,i._peekContext=r,i.prototype._peekContext=n,i.prototype._promiseCreated=o,a=!1},a=!0,i.prototype._pushContext=s.prototype._pushContext,i.prototype._popContext=s.prototype._popContext,i._peekContext=i.prototype._peekContext=c,i.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},s}},{}],9:[function(X,t,e){"use strict";t.exports=function(a,r){var n,o,i,s=a._getDomain,c=a._async,u=X("./errors").Warning,l=X("./util"),f=l.canAttachTrace,h=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,_=/\((?:timers\.js):\d+:\d+\)/,d=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,p=null,v=null,y=!1,t=!(0==l.env("BLUEBIRD_DEBUG")),e=!(0==l.env("BLUEBIRD_WARNINGS")||!t&&!l.env("BLUEBIRD_WARNINGS")),g=!(0==l.env("BLUEBIRD_LONG_STACK_TRACES")||!t&&!l.env("BLUEBIRD_LONG_STACK_TRACES")),m=0!=l.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(e||!!l.env("BLUEBIRD_W_FORGOTTEN_RETURN"));a.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},a.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var t=this;setTimeout(function(){t._notifyUnhandledRejection()},1)}},a.prototype._notifyUnhandledRejectionIsHandled=function(){N("rejectionHandled",n,void 0,this)},a.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},a.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},a.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),N("unhandledRejection",o,t,this)}},a.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},a.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},a.prototype._isUnhandledRejectionNotified=function(){return 0<(262144&this._bitField)},a.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},a.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},a.prototype._isRejectionUnhandled=function(){return 0<(1048576&this._bitField)},a.prototype._warn=function(t,e,r){return M(t,e,r||this)},a.onPossiblyUnhandledRejection=function(t){var e=s();o="function"==typeof t?null===e?t:l.domainBind(e,t):void 0},a.onUnhandledRejectionHandled=function(t){var e=s();n="function"==typeof t?null===e?t:l.domainBind(e,t):void 0};var b=function(){};a.longStackTraces=function(){if(c.haveItemsQueued()&&!W.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!W.longStackTraces&&H()){var t=a.prototype._captureStackTrace,e=a.prototype._attachExtraTrace;W.longStackTraces=!0,b=function(){if(c.haveItemsQueued()&&!W.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");a.prototype._captureStackTrace=t,a.prototype._attachExtraTrace=e,r.deactivateLongStackTraces(),c.enableTrampoline(),W.longStackTraces=!1},a.prototype._captureStackTrace=L,a.prototype._attachExtraTrace=D,r.activateLongStackTraces(),c.disableTrampolineIfNecessary()}},a.hasLongStackTraces=function(){return W.longStackTraces&&H()};var j=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return l.global.dispatchEvent(t),function(t,e){var r=new CustomEvent(t.toLowerCase(),{detail:e,cancelable:!0});return!l.global.dispatchEvent(r)}}if("function"==typeof Event){t=new Event("CustomEvent");return l.global.dispatchEvent(t),function(t,e){var r=new Event(t.toLowerCase(),{cancelable:!0});return r.detail=e,!l.global.dispatchEvent(r)}}return(t=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),l.global.dispatchEvent(t),function(t,e){var r=document.createEvent("CustomEvent");return r.initCustomEvent(t.toLowerCase(),!1,!0,e),!l.global.dispatchEvent(r)}}catch(t){}return function(){return!1}}(),w=l.isNode?function(){return Y.emit.apply(Y,arguments)}:l.global?function(t){var e="on"+t.toLowerCase(),r=l.global[e];return!!r&&(r.apply(l.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function x(t,e){return{promise:e}}var C={promiseCreated:x,promiseFulfilled:x,promiseRejected:x,promiseResolved:x,promiseCancelled:x,promiseChained:function(t,e,r){return{promise:e,child:r}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,r){return{reason:e,promise:r}},rejectionHandled:x},k=function(t){var e=!1;try{e=w.apply(null,arguments)}catch(t){c.throwLater(t),e=!0}var r=!1;try{r=j(t,C[t].apply(null,arguments))}catch(t){c.throwLater(t),r=!0}return r||e};function O(){return!1}function T(t,e,r){var n=this;try{t(e,r,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+l.toString(t));n._attachCancellationCallback(t)})}catch(t){return t}}function S(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?l.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function A(){return this._onCancelField}function E(t){this._onCancelField=t}function F(){this._cancellationParent=void 0,this._onCancelField=void 0}function P(t,e){if(0!=(1&e)){var r=(this._cancellationParent=t)._branchesRemainingToCancel;void 0===r&&(r=0),t._branchesRemainingToCancel=r+1}0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}a.config=function(t){if("longStackTraces"in(t=Object(t))&&(t.longStackTraces?a.longStackTraces():!t.longStackTraces&&a.hasLongStackTraces()&&b()),"warnings"in t){var e=t.warnings;W.warnings=!!e,m=W.warnings,l.isObject(e)&&"wForgottenReturn"in e&&(m=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!W.cancellation){if(c.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");a.prototype._clearCancellationData=F,a.prototype._propagateFrom=P,a.prototype._onCancel=A,a.prototype._setOnCancel=E,a.prototype._attachCancellationCallback=S,a.prototype._execute=T,I=P,W.cancellation=!0}return"monitoring"in t&&(t.monitoring&&!W.monitoring?(W.monitoring=!0,a.prototype._fireEvent=k):!t.monitoring&&W.monitoring&&(W.monitoring=!1,a.prototype._fireEvent=O)),a},a.prototype._fireEvent=O,a.prototype._execute=function(t,e,r){try{t(e,r)}catch(t){return t}},a.prototype._onCancel=function(){},a.prototype._setOnCancel=function(t){},a.prototype._attachCancellationCallback=function(t){},a.prototype._captureStackTrace=function(){},a.prototype._attachExtraTrace=function(){},a.prototype._clearCancellationData=function(){},a.prototype._propagateFrom=function(t,e){};var I=function(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)};function R(){var t=this._boundTo;return void 0!==t&&t instanceof a?t.isFulfilled()?t.value():void 0:t}function L(){this._trace=new $(this._peekContext())}function D(t,e){if(f(t)){var r=this._trace;if(void 0!==r&&e&&(r=r._parent),void 0!==r)r.attachExtraTrace(t);else if(!t.__stackCleaned__){var n=q(t);l.notEnumerableProp(t,"stack",n.message+"\n"+n.stack.join("\n")),l.notEnumerableProp(t,"__stackCleaned__",!0)}}}function M(t,e,r){if(W.warnings){var n,o=new u(t);if(e)r._attachExtraTrace(o);else if(W.longStackTraces&&(n=a._peekContext()))n.attachExtraTrace(o);else{var i=q(o);o.stack=i.message+"\n"+i.stack.join("\n")}k("warning",o)||V(o,"",!0)}}function U(t){for(var e=[],r=0;r<t.length;++r){var n=t[r],o="    (No stack trace)"===n||p.test(n),i=o&&z(n);o&&!i&&(y&&" "!==n.charAt(0)&&(n="    "+n),e.push(n))}return e}function q(t){var e=t.stack,r=t.toString();return e="string"==typeof e&&0<e.length?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),r=0;r<e.length;++r){var n=e[r];if("    (No stack trace)"===n||p.test(n))break}return 0<r&&"SyntaxError"!=t.name&&(e=e.slice(r)),e}(t):["    (No stack trace)"],{message:r,stack:"SyntaxError"==t.name?e:U(e)}}function V(t,e,r){if("undefined"!=typeof console){var n;if(l.isObject(t)){var o=t.stack;n=e+v(o,t)}else n=e+String(t);"function"==typeof i?i(n,r):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(n)}}function N(t,e,r,n){var o=!1;try{"function"==typeof e&&(o=!0,"rejectionHandled"===t?e(n):e(r,n))}catch(t){c.throwLater(t)}"unhandledRejection"===t?k(t,r,n)||o||V(r,"Unhandled rejection "):k(t,n)}function B(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():l.toString(t);if(/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+function(t){if(t.length<41)return t;return t.substr(0,38)+"..."}(e)+">, no stack trace)"}function H(){return"function"==typeof Q}var z=function(){return!1},G=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function K(t){var e=t.match(G);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function $(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);Q(this,$),32<e&&this.uncycle()}l.inherits($,Error),(r.CapturedTrace=$).prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],r={},n=0,o=this;void 0!==o;++n)e.push(o),o=o._parent;for(n=(t=this._length=n)-1;0<=n;--n){var i=e[n].stack;void 0===r[i]&&(r[i]=n)}for(n=0;n<t;++n){var a=r[e[n].stack];if(void 0!==a&&a!==n){0<a&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[n]._parent=void 0,e[n]._length=1;var s=0<n?e[n-1]:this;a<t-1?(s._parent=e[a+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var c=s._length+1,u=n-2;0<=u;--u)e[u]._length=c,c++;return}}}},$.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=q(t),r=e.message,n=[e.stack],o=this;void 0!==o;)n.push(U(o.stack.split("\n"))),o=o._parent;!function(t){for(var e=t[0],r=1;r<t.length;++r){for(var n=t[r],o=e.length-1,i=e[o],a=-1,s=n.length-1;0<=s;--s)if(n[s]===i){a=s;break}for(s=a;0<=s;--s){var c=n[s];if(e[o]!==c)break;e.pop(),o--}e=n}}(n),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(n),l.notEnumerableProp(t,"stack",function(t,e){for(var r=0;r<e.length-1;++r)e[r].push("From previous event:"),e[r]=e[r].join("\n");return r<e.length&&(e[r]=e[r].join("\n")),t+"\n"+e.join("\n")}(r,n)),l.notEnumerableProp(t,"__stackCleaned__",!0)}};var Q=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():B(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,p=t,v=e;var r=Error.captureStackTrace;return z=function(t){return h.test(t)},function(t,e){Error.stackTraceLimit+=6,r(t,e),Error.stackTraceLimit-=6}}var n,o=new Error;if("string"==typeof o.stack&&0<=o.stack.split("\n")[0].indexOf("stackDetection@"))return p=/@/,v=e,y=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){n="stack"in t}return"stack"in o||!n||"number"!=typeof Error.stackTraceLimit?(v=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?B(e):e.toString()},null):(p=t,v=e,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(i=function(t){console.warn(t)},l.isNode&&Y.stderr.isTTY?i=function(t,e){var r=e?"[33m":"[31m";console.warn(r+t+"[0m\n")}:l.isNode||"string"!=typeof(new Error).stack||(i=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var W={warnings:e,longStackTraces:!1,cancellation:!1,monitoring:!1};return g&&a.longStackTraces(),{longStackTraces:function(){return W.longStackTraces},warnings:function(){return W.warnings},cancellation:function(){return W.cancellation},monitoring:function(){return W.monitoring},propagateFromFunction:function(){return I},boundValueFunction:function(){return R},checkForgottenReturns:function(t,e,r,n,o){if(void 0===t&&null!==e&&m){if(void 0!==o&&o._returnedNonUndefined())return;if(0==(65535&n._bitField))return;r&&(r+=" ");var i="",a="";if(e._trace){for(var s=e._trace.stack.split("\n"),c=U(s),u=c.length-1;0<=u;--u){var l=c[u];if(!_.test(l)){var f=l.match(d);f&&(i="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(0<c.length){var h=c[0];for(u=0;u<s.length;++u)if(s[u]===h){0<u&&(a="\n"+s[u-1]);break}}}var p="a promise was created in a "+r+"handler "+i+"but was not returned from it, see http://goo.gl/rRqMUw"+a;n._warn(p,!0,e)}},setBounds:function(t,e){if(H()){for(var r,n,o=t.stack.split("\n"),i=e.stack.split("\n"),a=-1,s=-1,c=0;c<o.length;++c)if(u=K(o[c])){r=u.fileName,a=u.line;break}for(c=0;c<i.length;++c){var u;if(u=K(i[c])){n=u.fileName,s=u.line;break}}a<0||s<0||!r||!n||r!==n||s<=a||(z=function(t){if(h.test(t))return!0;var e=K(t);return!!(e&&e.fileName===r&&a<=e.line&&e.line<=s)})}},warn:M,deprecated:function(t,e){var r=t+" is deprecated and will be removed in a future version.";return e&&(r+=" Use "+e+" instead."),M(r)},CapturedTrace:$,fireDomEvent:j,fireGlobalEvent:w}}},{"./errors":12,"./util":36}],10:[function(t,e,r){"use strict";e.exports=function(r){function n(){return this.value}function o(){throw this.reason}r.prototype.return=r.prototype.thenReturn=function(t){return t instanceof r&&t.suppressUnhandledRejections(),this._then(n,void 0,void 0,{value:t},void 0)},r.prototype.throw=r.prototype.thenThrow=function(t){return this._then(o,void 0,void 0,{reason:t},void 0)},r.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,o,void 0,{reason:t},void 0);var e=arguments[1];return this.caught(t,function(){throw e})},r.prototype.catchReturn=function(t){if(arguments.length<=1)return t instanceof r&&t.suppressUnhandledRejections(),this._then(void 0,n,void 0,{value:t},void 0);var e=arguments[1];e instanceof r&&e.suppressUnhandledRejections();return this.caught(t,function(){return e})}}},{}],11:[function(t,e,r){"use strict";e.exports=function(t,r){var n=t.reduce,e=t.all;function o(){return e(this)}t.prototype.each=function(t){return n(this,t,r,0)._then(o,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return n(this,t,r,r)},t.each=function(t,e){return n(t,e,r,0)._then(o,void 0,void 0,t,void 0)},t.mapSeries=function(t,e){return n(t,e,r,r)}}},{}],12:[function(t,e,r){"use strict";var n,o,i=t("./es5"),a=i.freeze,s=t("./util"),c=s.inherits,u=s.notEnumerableProp;function l(e,r){function n(t){if(!(this instanceof n))return new n(t);u(this,"message","string"==typeof t?t:r),u(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return c(n,Error),n}var f=l("Warning","warning"),h=l("CancellationError","cancellation error"),p=l("TimeoutError","timeout error"),_=l("AggregateError","aggregate error");try{n=TypeError,o=RangeError}catch(t){n=l("TypeError","type error"),o=l("RangeError","range error")}for(var d="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),v=0;v<d.length;++v)"function"==typeof Array.prototype[d[v]]&&(_.prototype[d[v]]=Array.prototype[d[v]]);i.defineProperty(_.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),_.prototype.isOperational=!0;var y=0;function g(t){if(!(this instanceof g))return new g(t);u(this,"name","OperationalError"),u(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(u(this,"message",t.message),u(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}_.prototype.toString=function(){var t=Array(4*y+1).join(" "),e="\n"+t+"AggregateError of:\n";y++,t=Array(4*y+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",o=n.split("\n"),i=0;i<o.length;++i)o[i]=t+o[i];e+=(n=o.join("\n"))+"\n"}return y--,e},c(g,Error);var m=Error.__BluebirdErrorTypes__;m||(m=a({CancellationError:h,TimeoutError:p,OperationalError:g,RejectionError:g,AggregateError:_}),i.defineProperty(Error,"__BluebirdErrorTypes__",{value:m,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:n,RangeError:o,CancellationError:m.CancellationError,OperationalError:m.OperationalError,TimeoutError:m.TimeoutError,AggregateError:m.AggregateError,Warning:f}},{"./es5":13,"./util":36}],13:[function(t,e,r){var n=function(){"use strict";return void 0===this}();if(n)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return!(r&&!r.writable&&!r.set)}};else{var o={}.hasOwnProperty,i={}.toString,a={}.constructor.prototype,s=function(t){var e=[];for(var r in t)o.call(t,r)&&e.push(r);return e};e.exports={isArray:function(t){try{return"[object Array]"===i.call(t)}catch(t){return!1}},keys:s,names:s,defineProperty:function(t,e,r){return t[e]=r.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return a}},isES5:n,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,r){"use strict";e.exports=function(t,n){var o=t.map;t.prototype.filter=function(t,e){return o(this,t,e,n)},t.filter=function(t,e,r){return o(t,e,r,n)}}},{}],15:[function(t,e,r){"use strict";e.exports=function(s,a,c){var u=t("./util"),l=s.CancellationError,f=u.errorObj,h=t("./catch_filter")(c);function o(t,e,r){this.promise=t,this.type=e,this.handler=r,this.called=!1,this.cancelPromise=null}function p(t){this.finallyHandler=t}function _(t,e){return null!=t.cancelPromise&&(1<arguments.length?t.cancelPromise._reject(e):t.cancelPromise._cancel(),!(t.cancelPromise=null))}function d(){return y.call(this,this.promise._target()._settledValue())}function v(t){if(!_(this,t))return f.e=t,f}function y(t){var e=this.promise,r=this.handler;if(!this.called){this.called=!0;var n=this.isFinallyHandler()?r.call(e._boundValue()):r.call(e._boundValue(),t);if(n===c)return n;if(void 0!==n){e._setReturnedNonUndefined();var o=a(n,e);if(o instanceof s){if(null!=this.cancelPromise){if(o._isCancelled()){var i=new l("late cancellation observer");return e._attachExtraTrace(i),f.e=i,f}o.isPending()&&o._attachCancellationCallback(new p(this))}return o._then(d,v,void 0,this,void 0)}}}return e.isRejected()?(_(this),f.e=t,f):(_(this),t)}return o.prototype.isFinallyHandler=function(){return 0===this.type},p.prototype._resultCancelled=function(){_(this.finallyHandler)},s.prototype._passThrough=function(t,e,r,n){return"function"!=typeof t?this.then():this._then(r,n,void 0,new o(this,e,t),void 0)},s.prototype.lastly=s.prototype.finally=function(t){return this._passThrough(t,0,y,y)},s.prototype.tap=function(t){return this._passThrough(t,1,y)},s.prototype.tapCatch=function(t){var e=arguments.length;if(1===e)return this._passThrough(t,1,void 0,y);var r,n=new Array(e-1),o=0;for(r=0;r<e-1;++r){var i=arguments[r];if(!u.isObject(i))return s.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+u.classString(i)));n[o++]=i}n.length=o;var a=arguments[r];return this._passThrough(h(n,a,this),1,void 0,y)},o}},{"./catch_filter":7,"./util":36}],16:[function(r,t,e){"use strict";t.exports=function(s,n,a,c,t,u){var l=r("./errors").TypeError,e=r("./util"),f=e.errorObj,h=e.tryCatch,p=[];function _(t,e,r,n){if(u.cancellation()){var o=new s(a),i=this._finallyPromise=new s(a);this._promise=o.lastly(function(){return i}),o._captureStackTrace(),o._setOnCancel(this)}else{(this._promise=new s(a))._captureStackTrace()}this._stack=n,this._generatorFunction=t,this._receiver=e,this._generator=void 0,this._yieldHandlers="function"==typeof r?[r].concat(p):p,this._yieldedPromise=null,this._cancellationPhase=!1}e.inherits(_,t),_.prototype._isResolved=function(){return null===this._promise},_.prototype._cleanup=function(){this._promise=this._generator=null,u.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},_.prototype._promiseCancelled=function(){if(!this._isResolved()){var t;if(void 0!==this._generator.return)this._promise._pushContext(),t=h(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var e=new s.CancellationError("generator .return() sentinel");s.coroutine.returnSentinel=e,this._promise._attachExtraTrace(e),this._promise._pushContext(),t=h(this._generator.throw).call(this._generator,e),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},_.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=h(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},_.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=h(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},_.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof s){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},_.prototype.promise=function(){return this._promise},_.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},_.prototype._continue=function(t){var e=this._promise;if(t===f)return this._cleanup(),this._cancellationPhase?e.cancel():e._rejectCallback(t.e,!1);var r=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?e.cancel():e._resolveCallback(r);var n=c(r,this._promise);if(n instanceof s||null!==(n=function(t,e,r){for(var n=0;n<e.length;++n){r._pushContext();var o=h(e[n])(t);if(r._popContext(),o===f){r._pushContext();var i=s.reject(f.e);return r._popContext(),i}var a=c(o,r);if(a instanceof s)return a}return null}(n,this._yieldHandlers,this._promise))){var o=(n=n._target())._bitField;0==(50397184&o)?(this._yieldedPromise=n)._proxy(this,null):0!=(33554432&o)?s._async.invoke(this._promiseFulfilled,this,n._value()):0!=(16777216&o)?s._async.invoke(this._promiseRejected,this,n._reason()):this._promiseCancelled()}else this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},s.coroutine=function(n,t){if("function"!=typeof n)throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var o=Object(t).yieldHandler,i=_,a=(new Error).stack;return function(){var t=n.apply(this,arguments),e=new i(void 0,void 0,o,a),r=e.promise();return e._generator=t,e._promiseFulfilled(void 0),r}},s.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new l("expecting a function but got "+e.classString(t));p.push(t)},s.spawn=function(t){if(u.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var e=new _(t,this),r=e.promise();return e._run(s.spawn),r}}},{"./errors":12,"./util":36}],17:[function(s,t,e){"use strict";t.exports=function(t,o,e,r,n,i){var a=s("./util");a.canEvaluate,a.tryCatch,a.errorObj;t.join=function(){var t,e=arguments.length-1;0<e&&"function"==typeof arguments[e]&&(t=arguments[e]);var r=[].slice.call(arguments);t&&r.pop();var n=new o(r).promise();return void 0!==t?n.spread(t):n}}},{"./util":36}],18:[function(e,t,r){"use strict";t.exports=function(p,t,i,_,a,d){var s=p._getDomain,c=e("./util"),v=c.tryCatch,y=c.errorObj,u=p._async;function l(t,e,r,n){this.constructor$(t),this._promise._captureStackTrace();var o=s();this._callback=null===o?e:c.domainBind(o,e),this._preservedValues=n===a?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=[],u.invoke(this._asyncInit,this,void 0)}function o(t,e,r,n){if("function"!=typeof e)return i("expecting a function but got "+c.classString(e));var o=0;if(void 0!==r){if("object"!=typeof r||null===r)return p.reject(new TypeError("options argument must be an object but it is "+c.classString(r)));if("number"!=typeof r.concurrency)return p.reject(new TypeError("'concurrency' must be a number but it is "+c.classString(r.concurrency)));o=r.concurrency}return new l(t,e,o="number"==typeof o&&isFinite(o)&&1<=o?o:0,n).promise()}c.inherits(l,t),l.prototype._asyncInit=function(){this._init$(void 0,-2)},l.prototype._init=function(){},l.prototype._promiseFulfilled=function(t,e){var r=this._values,n=this.length(),o=this._preservedValues,i=this._limit;if(e<0){if(r[e=-1*e-1]=t,1<=i&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(1<=i&&this._inFlight>=i)return r[e]=t,this._queue.push(e),!1;null!==o&&(o[e]=t);var a=this._promise,s=this._callback,c=a._boundValue();a._pushContext();var u=v(s).call(c,t,e,n),l=a._popContext();if(d.checkForgottenReturns(u,l,null!==o?"Promise.filter":"Promise.map",a),u===y)return this._reject(u.e),!0;var f=_(u,this._promise);if(f instanceof p){var h=(f=f._target())._bitField;if(0==(50397184&h))return 1<=i&&this._inFlight++,(r[e]=f)._proxy(this,-1*(e+1)),!1;if(0==(33554432&h))return 0!=(16777216&h)?this._reject(f._reason()):this._cancel(),!0;u=f._value()}r[e]=u}return n<=++this._totalResolved&&(null!==o?this._filter(r,o):this._resolve(r),!0)},l.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,r=this._values;0<t.length&&this._inFlight<e;){if(this._isResolved())return;var n=t.pop();this._promiseFulfilled(r[n],n)}},l.prototype._filter=function(t,e){for(var r=e.length,n=new Array(r),o=0,i=0;i<r;++i)t[i]&&(n[o++]=e[i]);n.length=o,this._resolve(n)},l.prototype.preservedValues=function(){return this._preservedValues},p.prototype.map=function(t,e){return o(this,t,e,null)},p.map=function(t,e,r,n){return o(t,e,r,n)}}},{"./util":36}],19:[function(e,t,r){"use strict";t.exports=function(a,s,t,c,u){var l=e("./util"),f=l.tryCatch;a.method=function(n){if("function"!=typeof n)throw new a.TypeError("expecting a function but got "+l.classString(n));return function(){var t=new a(s);t._captureStackTrace(),t._pushContext();var e=f(n).apply(this,arguments),r=t._popContext();return u.checkForgottenReturns(e,r,"Promise.method",t),t._resolveFromSyncValue(e),t}},a.attempt=a.try=function(t){if("function"!=typeof t)return c("expecting a function but got "+l.classString(t));var e,r=new a(s);if(r._captureStackTrace(),r._pushContext(),1<arguments.length){u.deprecated("calling Promise.try with more than 1 argument");var n=arguments[1],o=arguments[2];e=l.isArray(n)?f(t).apply(o,n):f(t).call(o,n)}else e=f(t)();var i=r._popContext();return u.checkForgottenReturns(e,i,"Promise.try",r),r._resolveFromSyncValue(e),r},a.prototype._resolveFromSyncValue=function(t){t===l.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,r){"use strict";var a=t("./util"),s=a.maybeWrapAsError,c=t("./errors").OperationalError,u=t("./es5");var l=/^(?:name|message|stack|cause)$/;function f(t){var e,r;if((r=t)instanceof Error&&u.getPrototypeOf(r)===Error.prototype){(e=new c(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var n=u.keys(t),o=0;o<n.length;++o){var i=n[o];l.test(i)||(e[i]=t[i])}return e}return a.markAsOriginatingFromRejection(t),t}e.exports=function(o,i){return function(t,e){if(null!==o){if(t){var r=f(s(t));o._attachExtraTrace(r),o._reject(r)}else if(i){var n=[].slice.call(arguments,1);o._fulfill(n)}else o._fulfill(e);o=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,r){"use strict";t.exports=function(t){var n=e("./util"),o=t._async,i=n.tryCatch,a=n.errorObj;function s(t,e){if(!n.isArray(t))return c.call(this,t,e);var r=i(e).apply(this._boundValue(),[null].concat(t));r===a&&o.throwLater(r.e)}function c(t,e){var r=this._boundValue(),n=void 0===t?i(e).call(r,null):i(e).call(r,null,t);n===a&&o.throwLater(n.e)}function u(t,e){if(!t){var r=new Error(t+"");r.cause=t,t=r}var n=i(e).call(this._boundValue(),t);n===a&&o.throwLater(n.e)}t.prototype.asCallback=t.prototype.nodeify=function(t,e){if("function"==typeof t){var r=c;void 0!==e&&Object(e).spread&&(r=s),this._then(r,u,void 0,this,t)}return this}}},{"./util":36}],22:[function(E,F,t){"use strict";F.exports=function(){var c=function(){return new f("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},s=function(){return new O.PromiseInspection(this._target())},a=function(t){return O.reject(new f(t))};function u(){}var p,l={},_=E("./util");p=_.isNode?function(){var t=Y.domain;return void 0===t&&(t=null),t}:function(){return null},_.notEnumerableProp(O,"_getDomain",p);var t=E("./es5"),e=E("./async"),d=new e;t.defineProperty(O,"_async",{value:d});var r=E("./errors"),f=O.TypeError=r.TypeError;O.RangeError=r.RangeError;var v=O.CancellationError=r.CancellationError;O.TimeoutError=r.TimeoutError,O.OperationalError=r.OperationalError,O.RejectionError=r.OperationalError,O.AggregateError=r.AggregateError;var y=function(){},h={},g={},m=E("./thenables")(O,y),b=E("./promise_array")(O,y,m,a,u),n=E("./context")(O),o=n.create,j=E("./debuggability")(O,n),w=(j.CapturedTrace,E("./finally")(O,m,g)),x=E("./catch_filter")(g),i=E("./nodeback"),C=_.errorObj,k=_.tryCatch;function O(t){t!==y&&function(t,e){if(null==t||t.constructor!==O)throw new f("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof e)throw new f("expecting a function but got "+_.classString(e))}(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function T(t){this.promise._resolveCallback(t)}function S(t){this.promise._rejectCallback(t,!1)}function A(t){var e=new O(y);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}return O.prototype.toString=function(){return"[object Promise]"},O.prototype.caught=O.prototype.catch=function(t){var e=arguments.length;if(1<e){var r,n=new Array(e-1),o=0;for(r=0;r<e-1;++r){var i=arguments[r];if(!_.isObject(i))return a("Catch statement predicate: expecting an object but got "+_.classString(i));n[o++]=i}return n.length=o,t=arguments[r],this.then(void 0,x(n,t,this))}return this.then(void 0,t)},O.prototype.reflect=function(){return this._then(s,s,void 0,this,void 0)},O.prototype.then=function(t,e){if(j.warnings()&&0<arguments.length&&"function"!=typeof t&&"function"!=typeof e){var r=".then() only accepts functions but was passed: "+_.classString(t);1<arguments.length&&(r+=", "+_.classString(e)),this._warn(r)}return this._then(t,e,void 0,void 0,void 0)},O.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},O.prototype.spread=function(t){return"function"!=typeof t?a("expecting a function but got "+_.classString(t)):this.all()._then(t,void 0,void 0,h,void 0)},O.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},O.prototype.all=function(){return 0<arguments.length&&this._warn(".all() was passed arguments but it does not take any"),new b(this).promise()},O.prototype.error=function(t){return this.caught(_.originatesFromRejection,t)},O.getNewLibraryCopy=F.exports,O.is=function(t){return t instanceof O},O.fromNode=O.fromCallback=function(t){var e=new O(y);e._captureStackTrace();var r=1<arguments.length&&!!Object(arguments[1]).multiArgs,n=k(t)(i(e,r));return n===C&&e._rejectCallback(n.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},O.all=function(t){return new b(t).promise()},O.resolve=O.fulfilled=O.cast=function(t){var e=m(t);return e instanceof O||((e=new O(y))._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},O.reject=O.rejected=function(t){var e=new O(y);return e._captureStackTrace(),e._rejectCallback(t,!0),e},O.setScheduler=function(t){if("function"!=typeof t)throw new f("expecting a function but got "+_.classString(t));return d.setScheduler(t)},O.prototype._then=function(t,e,r,n,o){var i=void 0!==o,a=i?o:new O(y),s=this._target(),c=s._bitField;i||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===n&&0!=(2097152&this._bitField)&&(n=0!=(50397184&c)?this._boundValue():s===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var u=p();if(0!=(50397184&c)){var l,f,h=s._settlePromiseCtx;0!=(33554432&c)?(f=s._rejectionHandler0,l=t):0!=(16777216&c)?(f=s._fulfillmentHandler0,l=e,s._unsetRejectionIsUnhandled()):(h=s._settlePromiseLateCancellationObserver,f=new v("late cancellation observer"),s._attachExtraTrace(f),l=e),d.invoke(h,s,{handler:null===u?l:"function"==typeof l&&_.domainBind(u,l),promise:a,receiver:n,value:f})}else s._addCallbacks(t,e,a,n,u);return a},O.prototype._length=function(){return 65535&this._bitField},O.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},O.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},O.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},O.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},O.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},O.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},O.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},O.prototype._isFinal=function(){return 0<(4194304&this._bitField)},O.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},O.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},O.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},O.prototype._setAsyncGuaranteed=function(){d.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},O.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==l)return void 0===e&&this._isBound()?this._boundValue():e},O.prototype._promiseAt=function(t){return this[4*t-4+2]},O.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},O.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},O.prototype._boundValue=function(){},O.prototype._migrateCallback0=function(t){t._bitField;var e=t._fulfillmentHandler0,r=t._rejectionHandler0,n=t._promise0,o=t._receiverAt(0);void 0===o&&(o=l),this._addCallbacks(e,r,n,o,null)},O.prototype._migrateCallbackAt=function(t,e){var r=t._fulfillmentHandlerAt(e),n=t._rejectionHandlerAt(e),o=t._promiseAt(e),i=t._receiverAt(e);void 0===i&&(i=l),this._addCallbacks(r,n,o,i,null)},O.prototype._addCallbacks=function(t,e,r,n,o){var i=this._length();if(65531<=i&&(i=0,this._setLength(0)),0===i)this._promise0=r,this._receiver0=n,"function"==typeof t&&(this._fulfillmentHandler0=null===o?t:_.domainBind(o,t)),"function"==typeof e&&(this._rejectionHandler0=null===o?e:_.domainBind(o,e));else{var a=4*i-4;this[a+2]=r,this[a+3]=n,"function"==typeof t&&(this[a+0]=null===o?t:_.domainBind(o,t)),"function"==typeof e&&(this[a+1]=null===o?e:_.domainBind(o,e))}return this._setLength(i+1),i},O.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},O.prototype._resolveCallback=function(t,e){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(c(),!1);var r=m(t,this);if(!(r instanceof O))return this._fulfill(t);e&&this._propagateFrom(r,2);var n=r._target();if(n!==this){var o=n._bitField;if(0==(50397184&o)){var i=this._length();0<i&&n._migrateCallback0(this);for(var a=1;a<i;++a)n._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(n)}else if(0!=(33554432&o))this._fulfill(n._value());else if(0!=(16777216&o))this._reject(n._reason());else{var s=new v("late cancellation observer");n._attachExtraTrace(s),this._reject(s)}}else this._reject(c())}},O.prototype._rejectCallback=function(t,e,r){var n=_.ensureErrorObject(t),o=n===t;if(!o&&!r&&j.warnings()){var i="a promise was rejected with a non-error: "+_.classString(t);this._warn(i,!0)}this._attachExtraTrace(n,!!e&&o),this._reject(t)},O.prototype._resolveFromExecutor=function(t){if(t!==y){var e=this;this._captureStackTrace(),this._pushContext();var r=!0,n=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,r)});r=!1,this._popContext(),void 0!==n&&e._rejectCallback(n,!0)}},O.prototype._settlePromiseFromHandler=function(t,e,r,n){var o=n._bitField;if(0==(65536&o)){var i;n._pushContext(),e===h?r&&"number"==typeof r.length?i=k(t).apply(this._boundValue(),r):(i=C).e=new f("cannot .spread() a non-array: "+_.classString(r)):i=k(t).call(e,r);var a=n._popContext();0==(65536&(o=n._bitField))&&(i===g?n._reject(r):i===C?n._rejectCallback(i.e,!1):(j.checkForgottenReturns(i,a,"",n,this),n._resolveCallback(i)))}},O.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},O.prototype._followee=function(){return this._rejectionHandler0},O.prototype._setFollowee=function(t){this._rejectionHandler0=t},O.prototype._settlePromise=function(t,e,r,n){var o=t instanceof O,i=this._bitField,a=0!=(134217728&i);0!=(65536&i)?(o&&t._invokeInternalOnCancel(),r instanceof w&&r.isFinallyHandler()?(r.cancelPromise=t,k(e).call(r,n)===C&&t._reject(C.e)):e===s?t._fulfill(s.call(r)):r instanceof u?r._promiseCancelled(t):o||t instanceof b?t._cancel():r.cancel()):"function"==typeof e?o?(a&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,r,n,t)):e.call(r,n,t):r instanceof u?r._isResolved()||(0!=(33554432&i)?r._promiseFulfilled(n,t):r._promiseRejected(n,t)):o&&(a&&t._setAsyncGuaranteed(),0!=(33554432&i)?t._fulfill(n):t._reject(n))},O.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,r=t.promise,n=t.receiver,o=t.value;"function"==typeof e?r instanceof O?this._settlePromiseFromHandler(e,n,o,r):e.call(n,o,r):r instanceof O&&r._reject(o)},O.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},O.prototype._settlePromise0=function(t,e,r){var n=this._promise0,o=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(n,t,o,e)},O.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},O.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var r=c();return this._attachExtraTrace(r),this._reject(r)}this._setFulfilled(),this._rejectionHandler0=t,0<(65535&e)&&(0!=(134217728&e)?this._settlePromises():d.settlePromises(this))}},O.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return d.fatalError(t,_.isNode);0<(65535&e)?d.settlePromises(this):this._ensurePossibleRejectionHandled()}},O.prototype._fulfillPromises=function(t,e){for(var r=1;r<t;r++){var n=this._fulfillmentHandlerAt(r),o=this._promiseAt(r),i=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(o,n,i,e)}},O.prototype._rejectPromises=function(t,e){for(var r=1;r<t;r++){var n=this._rejectionHandlerAt(r),o=this._promiseAt(r),i=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(o,n,i,e)}},O.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(0<e){if(0!=(16842752&t)){var r=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,r,t),this._rejectPromises(e,r)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,t),this._fulfillPromises(e,n)}this._setLength(0)}this._clearCancellationData()},O.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},O.defer=O.pending=function(){return j.deprecated("Promise.defer","new Promise"),{promise:new O(y),resolve:T,reject:S}},_.notEnumerableProp(O,"_makeSelfResolutionError",c),E("./method")(O,y,m,a,j),E("./bind")(O,y,m,j),E("./cancel")(O,b,a,j),E("./direct_resolve")(O),E("./synchronous_inspection")(O),E("./join")(O,b,m,y,d,p),(O.Promise=O).version="3.5.1",E("./map.js")(O,b,a,m,y,j),E("./call_get.js")(O),E("./using.js")(O,a,m,o,y,j),E("./timers.js")(O,y,j),E("./generators.js")(O,a,y,m,u,j),E("./nodeify.js")(O),E("./promisify.js")(O,y),E("./props.js")(O,b,m,a),E("./race.js")(O,y,m,a),E("./reduce.js")(O,b,a,m,y,j),E("./settle.js")(O,b,j),E("./some.js")(O,b,a),E("./filter.js")(O,y),E("./each.js")(O,y),E("./any.js")(O),_.toFastProperties(O),_.toFastProperties(O.prototype),A({a:1}),A({b:2}),A({c:3}),A(1),A(function(){}),A(void 0),A(!1),A(new O(y)),j.setBounds(e.firstLineError,_.lastLineError),O}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(n,t,e){"use strict";t.exports=function(s,r,c,a,t){var u=n("./util");u.isArray;function e(t){var e=this._promise=new s(r);t instanceof s&&e._propagateFrom(t,3),e._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return u.inherits(e,t),e.prototype.length=function(){return this._length},e.prototype.promise=function(){return this._promise},e.prototype._init=function t(e,r){var n=c(this._values,this._promise);if(n instanceof s){var o=(n=n._target())._bitField;if(this._values=n,0==(50397184&o))return this._promise._setAsyncGuaranteed(),n._then(t,this._reject,void 0,this,r);if(0==(33554432&o))return 0!=(16777216&o)?this._reject(n._reason()):this._cancel();n=n._value()}if(null!==(n=u.asArray(n)))0!==n.length?this._iterate(n):-5===r?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}(r));else{var i=a("expecting an array or an iterable object but got "+u.classString(n)).reason();this._promise._rejectCallback(i,!1)}},e.prototype._iterate=function(t){var e=this.getActualLength(t.length);this._length=e,this._values=this.shouldCopyValues()?new Array(e):this._values;for(var r=this._promise,n=!1,o=null,i=0;i<e;++i){var a=c(t[i],r);o=a instanceof s?(a=a._target())._bitField:null,n?null!==o&&a.suppressUnhandledRejections():null!==o?0==(50397184&o)?(a._proxy(this,i),this._values[i]=a):n=0!=(33554432&o)?this._promiseFulfilled(a._value(),i):0!=(16777216&o)?this._promiseRejected(a._reason(),i):this._promiseCancelled(i):n=this._promiseFulfilled(a,i)}n||r._setAsyncGuaranteed()},e.prototype._isResolved=function(){return null===this._values},e.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},e.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},e.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},e.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},e.prototype._promiseCancelled=function(){return this._cancel(),!0},e.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},e.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof s)t.cancel();else for(var e=0;e<t.length;++e)t[e]instanceof s&&t[e].cancel()}},e.prototype.shouldCopyValues=function(){return!0},e.prototype.getActualLength=function(t){return t},e}},{"./util":36}],24:[function(n,t,e){"use strict";t.exports=function(u,l){var p={},_=n("./util"),f=n("./nodeback"),h=_.withAppended,d=_.maybeWrapAsError,t=_.canEvaluate,v=n("./errors").TypeError,y={__isPromisified__:!0},e=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),g=function(t){return _.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function a(t){return!e.test(t)}function m(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function b(t,e,r,n){for(var o,i,a,s,c=_.inheritedDataKeys(t),u=[],l=0;l<c.length;++l){var f=c[l],h=t[f],p=n===g||g(f,h,t);"function"!=typeof h||m(h)||(o=t,i=f,a=e,void 0,(s=_.getDataPropertyOrDefault(o,i+a,y))&&m(s))||!n(f,h,t,p)||u.push(f,h)}return function(t,e,r){for(var n=0;n<t.length;n+=2){var o=t[n];if(r.test(o))for(var i=o.replace(r,""),a=0;a<t.length;a+=2)if(t[a]===i)throw new v("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}(u,e,r),u}var r,j=function(t){return t.replace(/([$])/,"\\$")};var w=t?r:function(o,i,t,e,r,a){var s=function(){return this}(),c=o;function n(){var t=i;i===p&&(t=this);var e=new u(l);e._captureStackTrace();var r="string"==typeof c&&this!==s?this[c]:o,n=f(e,a);try{r.apply(t,h(arguments,n))}catch(t){e._rejectCallback(d(t),!0,!0)}return e._isFateSealed()||e._setAsyncGuaranteed(),e}return"string"==typeof c&&(o=e),_.notEnumerableProp(n,"__isPromisified__",!0),n};function x(t,e,r,n,o){for(var i=new RegExp(j(e)+"$"),a=b(t,e,i,r),s=0,c=a.length;s<c;s+=2){var u=a[s],l=a[s+1],f=u+e;if(n===w)t[f]=w(u,p,u,l,e,o);else{var h=n(l,function(){return w(u,p,u,l,e,o)});_.notEnumerableProp(h,"__isPromisified__",!0),t[f]=h}}return _.toFastProperties(t),t}u.promisify=function(t,e){if("function"!=typeof t)throw new v("expecting a function but got "+_.classString(t));if(m(t))return t;var r,n=void 0===(e=Object(e)).context?p:e.context,o=!!e.multiArgs,i=w(r=t,n,void 0,r,null,o);return _.copyDescriptors(t,i,a),i},u.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new v("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var r=!!(e=Object(e)).multiArgs,n=e.suffix;"string"!=typeof n&&(n="Async");var o=e.filter;"function"!=typeof o&&(o=g);var i=e.promisifier;if("function"!=typeof i&&(i=w),!_.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=_.inheritedDataKeys(t),s=0;s<a.length;++s){var c=t[a[s]];"constructor"!==a[s]&&_.isClass(c)&&(x(c.prototype,n,o,i,r),x(c,n,o,i,r))}return x(t,n,o,i,r)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(f,t,e){"use strict";t.exports=function(n,t,o,i){var s,e=f("./util"),a=e.isObject,c=f("./es5");"function"==typeof Map&&(s=Map);var u=function(){var r=0,n=0;function o(t,e){this[r]=t,this[r+n]=e,r++}return function(t){n=t.size,r=0;var e=new Array(2*t.size);return t.forEach(o,e),e}}();function l(t){var e,r=!1;if(void 0!==s&&t instanceof s)e=u(t),r=!0;else{var n=c.keys(t),o=n.length;e=new Array(2*o);for(var i=0;i<o;++i){var a=n[i];e[i]=t[a],e[i+o]=a}}this.constructor$(e),this._isMap=r,this._init$(void 0,r?-6:-3)}function r(t){var e,r=o(t);return a(r)?(e=r instanceof n?r._then(n.props,void 0,void 0,void 0,void 0):new l(r).promise(),r instanceof n&&e._propagateFrom(r,2),e):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}e.inherits(l,t),l.prototype._init=function(){},l.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var r;if(this._isMap)r=function(t){for(var e=new s,r=t.length/2|0,n=0;n<r;++n){var o=t[r+n],i=t[n];e.set(o,i)}return e}(this._values);else{r={};for(var n=this.length(),o=0,i=this.length();o<i;++o)r[this._values[o+n]]=this._values[o]}return this._resolve(r),!0}return!1},l.prototype.shouldCopyValues=function(){return!1},l.prototype.getActualLength=function(t){return t>>1},n.prototype.props=function(){return r(this)},n.props=function(t){return r(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,r){"use strict";function n(t){this._capacity=t,this._length=0,this._front=0}n.prototype._willBeOverCapacity=function(t){return this._capacity<t},n.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},n.prototype.push=function(t,e,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(t),this._pushOne(e),void this._pushOne(r);var o=this._front+n-3;this._checkCapacity(n);var i=this._capacity-1;this[o+0&i]=t,this[o+1&i]=e,this[o+2&i]=r,this._length=n},n.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},n.prototype.length=function(){return this._length},n.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},n.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,function(t,e,r,n,o){for(var i=0;i<o;++i)r[i+n]=t[i+e],t[i+e]=void 0}(this,0,this,e,this._front+this._length&e-1)},e.exports=n},{}],27:[function(t,e,r){"use strict";e.exports=function(u,l,f,h){var p=t("./util"),_=function(e){return e.then(function(t){return r(t,e)})};function r(t,e){var r=f(t);if(r instanceof u)return _(r);if(null===(t=p.asArray(t)))return h("expecting an array or an iterable object but got "+p.classString(t));var n=new u(l);void 0!==e&&n._propagateFrom(e,3);for(var o=n._fulfill,i=n._reject,a=0,s=t.length;a<s;++a){var c=t[a];(void 0!==c||a in t)&&u.cast(c)._then(o,i,void 0,n,null)}return n}u.race=function(t){return r(t,void 0)},u.prototype.race=function(){return r(this,void 0)}}},{"./util":36}],28:[function(e,t,r){"use strict";t.exports=function(a,t,o,r,i,s){var c=a._getDomain,u=e("./util"),l=u.tryCatch;function f(t,e,r,n){this.constructor$(t);var o=c();this._fn=null===o?e:u.domainBind(o,e),void 0!==r&&(r=a.resolve(r))._attachCancellationCallback(this),this._initialValue=r,this._currentCancellable=null,this._eachValues=n===i?Array(this._length):0===n?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function h(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function p(t,e,r,n){return"function"!=typeof e?o("expecting a function but got "+u.classString(e)):new f(t,e,r,n).promise()}function _(t){this.accum=t,this.array._gotAccum(t);var e=r(this.value,this.array._promise);return e instanceof a?(this.array._currentCancellable=e)._then(n,void 0,void 0,this,void 0):n.call(this,e)}function n(t){var e,r=this.array,n=r._promise,o=l(r._fn);n._pushContext(),(e=void 0!==r._eachValues?o.call(n._boundValue(),t,this.index,this.length):o.call(n._boundValue(),this.accum,t,this.index,this.length))instanceof a&&(r._currentCancellable=e);var i=n._popContext();return s.checkForgottenReturns(e,i,void 0!==r._eachValues?"Promise.each":"Promise.reduce",n),e}u.inherits(f,t),f.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==i&&this._eachValues.push(t)},f.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},f.prototype._init=function(){},f.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},f.prototype.shouldCopyValues=function(){return!1},f.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},f.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof a&&this._currentCancellable.cancel(),this._initialValue instanceof a&&this._initialValue.cancel())},f.prototype._iterate=function(t){var e,r,n=(this._values=t).length;if(void 0!==this._initialValue?(e=this._initialValue,r=0):(e=a.resolve(t[0]),r=1),!(this._currentCancellable=e).isRejected())for(;r<n;++r){var o={accum:null,value:t[r],index:r,length:n,array:this};e=e._then(_,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(e=e._then(this._eachComplete,void 0,void 0,this,void 0)),e._then(h,h,void 0,e,this)},a.prototype.reduce=function(t,e){return p(this,t,e,null)},a.reduce=function(t,e,r,n){return p(t,e,r,n)}}},{"./util":36}],29:[function(t,e,r){"use strict";var n,o=t("./util"),i=o.getNativePromise();if(o.isNode&&"undefined"==typeof MutationObserver){var a=B.setImmediate,s=Y.nextTick;n=o.isRecentNode?function(t){a.call(B,t)}:function(t){s.call(Y,t)}}else if("function"==typeof i&&"function"==typeof i.resolve){var c=i.resolve();n=function(t){c.then(t)}}else n="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var r=document.createElement("div"),n={attributes:!0},o=!1,i=document.createElement("div");new MutationObserver(function(){r.classList.toggle("foo"),o=!1}).observe(i,n);return function(t){var e=new MutationObserver(function(){e.disconnect(),t()});e.observe(r,n),o||(o=!0,i.classList.toggle("foo"))}}();e.exports=n},{"./util":36}],30:[function(i,t,e){"use strict";t.exports=function(t,e,r){var n=t.PromiseInspection;function o(t){this.constructor$(t)}i("./util").inherits(o,e),o.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(t,e){var r=new n;return r._bitField=33554432,r._settledValueField=t,this._promiseResolved(e,r)},o.prototype._promiseRejected=function(t,e){var r=new n;return r._bitField=16777216,r._settledValueField=t,this._promiseResolved(e,r)},t.settle=function(t){return r.deprecated(".settle()",".reflect()"),new o(t).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(l,t,e){"use strict";t.exports=function(t,e,o){var r=l("./util"),n=l("./errors").RangeError,i=l("./errors").AggregateError,a=r.isArray,s={};function c(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function u(t,e){if((0|e)!==e||e<0)return o("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var r=new c(t),n=r.promise();return r.setHowMany(e),r.init(),n}r.inherits(c,e),c.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=a(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(t){this._howMany=t},c.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},c.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(s),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new i,e=this.length();e<this._values.length;++e)this._values[e]!==s&&t.push(this._values[e]);return 0<t.length?this._reject(t):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(t){this._values.push(t)},c.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new n(e)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(t,e){return u(t,e)},t.prototype.some=function(t){return u(this,t)},t._SomePromiseArray=c}},{"./errors":12,"./util":36}],32:[function(t,e,r){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var r=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},o=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},i=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return a.call(this._target())},t.prototype.isRejected=function(){return i.call(this._target())},t.prototype.isFulfilled=function(){return o.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return r.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),n.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,r){"use strict";e.exports=function(s,c){var u=t("./util"),l=u.errorObj,o=u.isObject;var i={}.hasOwnProperty;return function(t,e){if(o(t)){if(t instanceof s)return t;var r=function(t){try{return t.then}catch(t){return l.e=t,l}}(t);if(r===l){e&&e._pushContext();var n=s.reject(r.e);return e&&e._popContext(),n}if("function"==typeof r)return function(t){try{return i.call(t,"_promise0")}catch(t){return!1}}(t)?(n=new s(c),t._then(n._fulfill,n._reject,void 0,n,null),n):function(t,e,r){var n=new s(c),o=n;r&&r._pushContext(),n._captureStackTrace(),r&&r._popContext();var i=!0,a=u.tryCatch(e).call(t,function(t){n&&(n._resolveCallback(t),n=null)},function(t){n&&(n._rejectCallback(t,i,!0),n=null)});return i=!1,n&&a===l&&(n._rejectCallback(a.e,!0,!0),n=null),o}(t,r,e)}return t}}},{"./util":36}],34:[function(t,e,r){"use strict";e.exports=function(o,i,s){var c=t("./util"),u=o.TimeoutError;function l(t){this.handle=t}l.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(t){return e(+this).thenReturn(t)},e=o.delay=function(t,e){var r,n;return void 0!==e?(r=o.resolve(e)._then(a,null,null,t,void 0),s.cancellation()&&e instanceof o&&r._setOnCancel(e)):(r=new o(i),n=setTimeout(function(){r._fulfill()},+t),s.cancellation()&&r._setOnCancel(new l(n)),r._captureStackTrace()),r._setAsyncGuaranteed(),r};o.prototype.delay=function(t){return e(t,this)};function r(t){return clearTimeout(this.handle),t}function n(t){throw clearTimeout(this.handle),t}o.prototype.timeout=function(t,o){var i,a;t=+t;var e=new l(setTimeout(function(){var t,e,r,n;i.isPending()&&(t=i,r=a,n="string"!=typeof(e=o)?e instanceof Error?e:new u("operation timed out"):new u(e),c.markAsOriginatingFromRejection(n),t._attachExtraTrace(n),t._reject(n),null!=r&&r.cancel())},t));return s.cancellation()?(a=this.then(),(i=a._then(r,n,void 0,e,void 0))._setOnCancel(e)):i=this._then(r,n,void 0,e,void 0),i}}},{"./util":36}],35:[function(a,t,e){"use strict";t.exports=function(h,p,_,e,t,d){var v=a("./util"),r=a("./errors").TypeError,n=a("./util").inherits,y=v.errorObj,g=v.tryCatch,o={};function u(t){setTimeout(function(){throw t},0)}function m(o,i){var a=0,s=o.length,c=new h(t);return function t(){if(s<=a)return c._fulfill();var e,r,n=(e=o[a++],(r=_(e))!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&r._setDisposable(e._getDisposer()),r);if(n instanceof h&&n._isDisposable()){try{n=_(n._getDisposer().tryDispose(i),o.promise)}catch(t){return u(t)}if(n instanceof h)return n._then(t,u,null,null,null)}t()}(),c}function b(t,e,r){this._data=t,this._promise=e,this._context=r}function i(t,e,r){this.constructor$(t,e,r)}function j(t){return b.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function w(t){this.length=t,this.promise=null,this[t-1]=null}b.prototype.data=function(){return this._data},b.prototype.promise=function(){return this._promise},b.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():o},b.prototype.tryDispose=function(t){var e=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=e!==o?this.doDispose(e,t):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},b.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},n(i,b),i.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},w.prototype._resultCancelled=function(){for(var t=this.length,e=0;e<t;++e){var r=this[e];r instanceof h&&r.cancel()}},h.using=function(){var t=arguments.length;if(t<2)return p("you must pass at least 2 arguments to Promise.using");var e,i=arguments[t-1];if("function"!=typeof i)return p("expecting a function but got "+v.classString(i));var a=!0;2===t&&Array.isArray(arguments[0])?(t=(e=arguments[0]).length,a=!1):(e=arguments,t--);for(var r=new w(t),n=0;n<t;++n){var o=e[n];if(b.isDisposer(o)){var s=o;(o=o.promise())._setDisposable(s)}else{var c=_(o);c instanceof h&&(o=c._then(j,null,null,{resources:r,index:n},void 0))}r[n]=o}var u=new Array(r.length);for(n=0;n<u.length;++n)u[n]=h.resolve(r[n]).reflect();var l=h.all(u).then(function(t){for(var e=0;e<t.length;++e){var r=t[e];if(r.isRejected())return y.e=r.error(),y;if(!r.isFulfilled())return void l.cancel();t[e]=r.value()}f._pushContext(),i=g(i);var n=a?i.apply(void 0,t):i(t),o=f._popContext();return d.checkForgottenReturns(n,o,"Promise.using",f),n}),f=l.lastly(function(){var t=new h.PromiseInspection(l);return m(r,t)});return(r.promise=f)._setOnCancel(r),f},h.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},h.prototype._isDisposable=function(){return 0<(131072&this._bitField)},h.prototype._getDisposer=function(){return this._disposer},h.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},h.prototype.disposer=function(t){if("function"==typeof t)return new i(t,this,e());throw new r}}},{"./errors":12,"./util":36}],36:[function(t,e,r){"use strict";var u=t("./es5"),n="undefined"==typeof navigator,o={e:{}},i,a="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==B?B:void 0!==this?this:null;function s(){try{var t=i;return i=null,t.apply(this,arguments)}catch(t){return o.e=t,o}}function c(t){return i=t,s}var l=function(e,r){var n={}.hasOwnProperty;function t(){for(var t in this.constructor=e,(this.constructor$=r).prototype)n.call(r.prototype,t)&&"$"!==t.charAt(t.length-1)&&(this[t+"$"]=r.prototype[t])}return t.prototype=r.prototype,e.prototype=new t,e.prototype};function f(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function h(t){return"function"==typeof t||"object"==typeof t&&null!==t}function p(t){return f(t)?new Error(k(t)):t}function _(t,e){var r,n=t.length,o=new Array(n+1);for(r=0;r<n;++r)o[r]=t[r];return o[r]=e,o}function d(t,e,r){if(!u.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var n=Object.getOwnPropertyDescriptor(t,e);return null!=n?null==n.get&&null==n.set?n.value:r:void 0}function v(t,e,r){if(f(t))return t;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return u.defineProperty(t,e,n),t}function y(t){throw t}var g=function(){var o=[Array.prototype,Object.prototype,Function.prototype],s=function(t){for(var e=0;e<o.length;++e)if(o[e]===t)return!0;return!1};if(u.isES5){var c=Object.getOwnPropertyNames;return function(t){for(var e=[],r=Object.create(null);null!=t&&!s(t);){var n;try{n=c(t)}catch(t){return e}for(var o=0;o<n.length;++o){var i=n[o];if(!r[i]){r[i]=!0;var a=Object.getOwnPropertyDescriptor(t,i);null!=a&&null==a.get&&null==a.set&&e.push(i)}}t=u.getPrototypeOf(t)}return e}}var i={}.hasOwnProperty;return function(t){if(s(t))return[];var e=[];t:for(var r in t)if(i.call(t,r))e.push(r);else{for(var n=0;n<o.length;++n)if(i.call(o[n],r))continue t;e.push(r)}return e}}(),m=/this\s*\.\s*\S+\s*=/;function b(t){try{if("function"==typeof t){var e=u.names(t.prototype),r=u.isES5&&1<e.length,n=0<e.length&&!(1===e.length&&"constructor"===e[0]),o=m.test(t+"")&&0<u.names(t).length;if(r||n||o)return!0}return!1}catch(t){return!1}}function j(t){function e(){}e.prototype=t;for(var r=8;r--;)new e;return t}var w=/^[a-z$_][a-z$_0-9]*$/i;function x(t){return w.test(t)}function C(t,e,r){for(var n=new Array(t),o=0;o<t;++o)n[o]=e+o+r;return n}function k(t){try{return t+""}catch(t){return"[no string representation]"}}function O(t){return t instanceof Error||null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function T(t){try{v(t,"isOperational",!0)}catch(t){}}function S(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function A(t){return O(t)&&u.propertyIsWritable(t,"stack")}var E="stack"in new Error?function(t){return A(t)?t:new Error(k(t))}:function(t){if(A(t))return t;try{throw new Error(k(t))}catch(t){return t}};function F(t){return{}.toString.call(t)}function P(t,e,r){for(var n=u.names(t),o=0;o<n.length;++o){var i=n[o];if(r(i))try{u.defineProperty(e,i,u.getDescriptor(t,i))}catch(t){}}}var I=function(t){return u.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var R="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,r=[],n=t[Symbol.iterator]();!(e=n.next()).done;)r.push(e.value);return r};I=function(t){return u.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?R(t):null}}var L=void 0!==Y&&"[object process]"===F(Y).toLowerCase(),D=void 0!==Y&&void 0!==Y.env;function M(t){return D?Y.env[t]:void 0}function U(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(t){}}function q(t,e){return t.bind(e)}var V={isClass:b,isIdentifier:x,inheritedDataKeys:g,getDataPropertyOrDefault:d,thrower:y,isArray:u.isArray,asArray:I,notEnumerableProp:v,isPrimitive:f,isObject:h,isError:O,canEvaluate:n,errorObj:o,tryCatch:c,inherits:l,withAppended:_,maybeWrapAsError:p,toFastProperties:j,filledRange:C,toString:k,canAttachTrace:A,ensureErrorObject:E,originatesFromRejection:S,markAsOriginatingFromRejection:T,classString:F,copyDescriptors:P,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:L,hasEnvVariables:D,env:M,global:a,getNativePromise:U,domainBind:q},N;V.isRecentNode=V.isNode&&(N=Y.versions.node.split(".").map(Number),0===N[0]&&10<N[1]||0<N[0]),V.isNode&&V.toFastProperties(Y);try{throw new Error}catch(t){V.lastLineError=t}e.exports=V},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:179}],2:[function(t,e,r){var n=t("./_getNative")(t("./_root"),"DataView");e.exports=n},{"./_getNative":80,"./_root":123}],3:[function(t,e,r){var n=t("./_hashClear"),o=t("./_hashDelete"),i=t("./_hashGet"),a=t("./_hashHas"),s=t("./_hashSet");function c(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},{"./_hashClear":88,"./_hashDelete":89,"./_hashGet":90,"./_hashHas":91,"./_hashSet":92}],4:[function(t,e,r){var n=t("./_listCacheClear"),o=t("./_listCacheDelete"),i=t("./_listCacheGet"),a=t("./_listCacheHas"),s=t("./_listCacheSet");function c(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},{"./_listCacheClear":103,"./_listCacheDelete":104,"./_listCacheGet":105,"./_listCacheHas":106,"./_listCacheSet":107}],5:[function(t,e,r){var n=t("./_getNative")(t("./_root"),"Map");e.exports=n},{"./_getNative":80,"./_root":123}],6:[function(t,e,r){var n=t("./_mapCacheClear"),o=t("./_mapCacheDelete"),i=t("./_mapCacheGet"),a=t("./_mapCacheHas"),s=t("./_mapCacheSet");function c(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},{"./_mapCacheClear":108,"./_mapCacheDelete":109,"./_mapCacheGet":110,"./_mapCacheHas":111,"./_mapCacheSet":112}],7:[function(t,e,r){var n=t("./_getNative")(t("./_root"),"Promise");e.exports=n},{"./_getNative":80,"./_root":123}],8:[function(t,e,r){var n=t("./_getNative")(t("./_root"),"Set");e.exports=n},{"./_getNative":80,"./_root":123}],9:[function(t,e,r){var n=t("./_MapCache"),o=t("./_setCacheAdd"),i=t("./_setCacheHas");function a(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new n;++e<r;)this.add(t[e])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,e.exports=a},{"./_MapCache":6,"./_setCacheAdd":124,"./_setCacheHas":125}],10:[function(t,e,r){var n=t("./_ListCache"),o=t("./_stackClear"),i=t("./_stackDelete"),a=t("./_stackGet"),s=t("./_stackHas"),c=t("./_stackSet");function u(t){var e=this.__data__=new n(t);this.size=e.size}u.prototype.clear=o,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=s,u.prototype.set=c,e.exports=u},{"./_ListCache":4,"./_stackClear":129,"./_stackDelete":130,"./_stackGet":131,"./_stackHas":132,"./_stackSet":133}],11:[function(t,e,r){var n=t("./_root").Symbol;e.exports=n},{"./_root":123}],12:[function(t,e,r){var n=t("./_root").Uint8Array;e.exports=n},{"./_root":123}],13:[function(t,e,r){var n=t("./_getNative")(t("./_root"),"WeakMap");e.exports=n},{"./_getNative":80,"./_root":123}],14:[function(t,e,r){e.exports=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}},{}],15:[function(t,e,r){e.exports=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}},{}],16:[function(t,e,r){e.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}},{}],17:[function(t,e,r){var l=t("./_baseTimes"),f=t("./isArguments"),h=t("./isArray"),p=t("./isBuffer"),_=t("./_isIndex"),d=t("./isTypedArray"),v=Object.prototype.hasOwnProperty;e.exports=function(t,e){var r=h(t),n=!r&&f(t),o=!r&&!n&&p(t),i=!r&&!n&&!o&&d(t),a=r||n||o||i,s=a?l(t.length,String):[],c=s.length;for(var u in t)!e&&!v.call(t,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||_(u,c))||s.push(u);return s}},{"./_baseTimes":53,"./_isIndex":96,"./isArguments":145,"./isArray":146,"./isBuffer":148,"./isTypedArray":156}],18:[function(t,e,r){e.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}},{}],19:[function(t,e,r){e.exports=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}},{}],20:[function(t,e,r){e.exports=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}},{}],21:[function(t,e,r){var o=t("./_baseAssignValue"),i=t("./eq"),a=Object.prototype.hasOwnProperty;e.exports=function(t,e,r){var n=t[e];a.call(t,e)&&i(n,r)&&(void 0!==r||e in t)||o(t,e,r)}},{"./_baseAssignValue":25,"./eq":140}],22:[function(t,e,r){var n=t("./eq");e.exports=function(t,e){for(var r=t.length;r--;)if(n(t[r][0],e))return r;return-1}},{"./eq":140}],23:[function(t,e,r){var n=t("./_copyObject"),o=t("./keys");e.exports=function(t,e){return t&&n(e,o(e),t)}},{"./_copyObject":65,"./keys":157}],24:[function(t,e,r){var n=t("./_copyObject"),o=t("./keysIn");e.exports=function(t,e){return t&&n(e,o(e),t)}},{"./_copyObject":65,"./keysIn":158}],25:[function(t,e,r){var n=t("./_defineProperty");e.exports=function(t,e,r){"__proto__"==e&&n?n(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}},{"./_defineProperty":71}],26:[function(t,e,r){var y=t("./_Stack"),g=t("./_arrayEach"),m=t("./_assignValue"),b=t("./_baseAssign"),j=t("./_baseAssignIn"),w=t("./_cloneBuffer"),x=t("./_copyArray"),C=t("./_copySymbols"),k=t("./_copySymbolsIn"),O=t("./_getAllKeys"),T=t("./_getAllKeysIn"),S=t("./_getTag"),A=t("./_initCloneArray"),E=t("./_initCloneByTag"),F=t("./_initCloneObject"),P=t("./isArray"),I=t("./isBuffer"),R=t("./isMap"),L=t("./isObject"),D=t("./isSet"),M=t("./keys"),U=1,q=2,V=4,N="[object Arguments]",B="[object Function]",H="[object GeneratorFunction]",z="[object Object]",G={};G[N]=G["[object Array]"]=G["[object ArrayBuffer]"]=G["[object DataView]"]=G["[object Boolean]"]=G["[object Date]"]=G["[object Float32Array]"]=G["[object Float64Array]"]=G["[object Int8Array]"]=G["[object Int16Array]"]=G["[object Int32Array]"]=G["[object Map]"]=G["[object Number]"]=G[z]=G["[object RegExp]"]=G["[object Set]"]=G["[object String]"]=G["[object Symbol]"]=G["[object Uint8Array]"]=G["[object Uint8ClampedArray]"]=G["[object Uint16Array]"]=G["[object Uint32Array]"]=!0,G["[object Error]"]=G[B]=G["[object WeakMap]"]=!1,e.exports=function r(n,o,i,t,e,a){var s,c=o&U,u=o&q,l=o&V;if(i&&(s=e?i(n,t,e,a):i(n)),void 0!==s)return s;if(!L(n))return n;var f=P(n);if(f){if(s=A(n),!c)return x(n,s)}else{var h=S(n),p=h==B||h==H;if(I(n))return w(n,c);if(h==z||h==N||p&&!e){if(s=u||p?{}:F(n),!c)return u?k(n,j(s,n)):C(n,b(s,n))}else{if(!G[h])return e?n:{};s=E(n,h,c)}}a||(a=new y);var _=a.get(n);if(_)return _;if(a.set(n,s),D(n))return n.forEach(function(t){s.add(r(t,o,i,t,n,a))}),s;if(R(n))return n.forEach(function(t,e){s.set(e,r(t,o,i,e,n,a))}),s;var d=l?u?T:O:u?keysIn:M,v=f?void 0:d(n);return g(v||n,function(t,e){v&&(t=n[e=t]),m(s,e,r(t,o,i,e,n,a))}),s}},{"./_Stack":10,"./_arrayEach":15,"./_assignValue":21,"./_baseAssign":23,"./_baseAssignIn":24,"./_cloneBuffer":59,"./_copyArray":64,"./_copySymbols":66,"./_copySymbolsIn":67,"./_getAllKeys":76,"./_getAllKeysIn":77,"./_getTag":85,"./_initCloneArray":93,"./_initCloneByTag":94,"./_initCloneObject":95,"./isArray":146,"./isBuffer":148,"./isMap":151,"./isObject":152,"./isSet":154,"./keys":157}],27:[function(t,e,r){var n=t("./isObject"),o=Object.create,i=function(){function r(){}return function(t){if(!n(t))return{};if(o)return o(t);r.prototype=t;var e=new r;return r.prototype=void 0,e}}();e.exports=i},{"./isObject":152}],28:[function(t,e,r){var n=t("./_baseForOwn"),o=t("./_createBaseEach")(n);e.exports=o},{"./_baseForOwn":31,"./_createBaseEach":69}],29:[function(t,e,r){var i=t("./_baseEach");e.exports=function(t,n){var o=[];return i(t,function(t,e,r){n(t,e,r)&&o.push(t)}),o}},{"./_baseEach":28}],30:[function(t,e,r){var n=t("./_createBaseFor")();e.exports=n},{"./_createBaseFor":70}],31:[function(t,e,r){var n=t("./_baseFor"),o=t("./keys");e.exports=function(t,e){return t&&n(t,e,o)}},{"./_baseFor":30,"./keys":157}],32:[function(t,e,r){var o=t("./_castPath"),i=t("./_toKey");e.exports=function(t,e){for(var r=0,n=(e=o(e,t)).length;null!=t&&r<n;)t=t[i(e[r++])];return r&&r==n?t:void 0}},{"./_castPath":57,"./_toKey":135}],33:[function(t,e,r){var o=t("./_arrayPush"),i=t("./isArray");e.exports=function(t,e,r){var n=e(t);return i(t)?n:o(n,r(t))}},{"./_arrayPush":19,"./isArray":146}],34:[function(t,e,r){var n=t("./_Symbol"),o=t("./_getRawTag"),i=t("./_objectToString"),a="[object Null]",s="[object Undefined]",c=n?n.toStringTag:void 0;e.exports=function(t){return null==t?void 0===t?s:a:c&&c in Object(t)?o(t):i(t)}},{"./_Symbol":11,"./_getRawTag":82,"./_objectToString":120}],35:[function(t,e,r){e.exports=function(t,e){return null!=t&&e in Object(t)}},{}],36:[function(t,e,r){var n=t("./_baseGetTag"),o=t("./isObjectLike"),i="[object Arguments]";e.exports=function(t){return o(t)&&n(t)==i}},{"./_baseGetTag":34,"./isObjectLike":153}],37:[function(t,e,r){var a=t("./_baseIsEqualDeep"),s=t("./isObjectLike");e.exports=function t(e,r,n,o,i){return e===r||(null==e||null==r||!s(e)&&!s(r)?e!=e&&r!=r:a(e,r,n,o,t,i))}},{"./_baseIsEqualDeep":38,"./isObjectLike":153}],38:[function(t,e,r){var y=t("./_Stack"),g=t("./_equalArrays"),m=t("./_equalByTag"),b=t("./_equalObjects"),j=t("./_getTag"),w=t("./isArray"),x=t("./isBuffer"),C=t("./isTypedArray"),k=1,O="[object Arguments]",T="[object Array]",S="[object Object]",A=Object.prototype.hasOwnProperty;e.exports=function(t,e,r,n,o,i){var a=w(t),s=w(e),c=a?T:j(t),u=s?T:j(e),l=(c=c==O?S:c)==S,f=(u=u==O?S:u)==S,h=c==u;if(h&&x(t)){if(!x(e))return!1;l=!(a=!0)}if(h&&!l)return i||(i=new y),a||C(t)?g(t,e,r,n,o,i):m(t,e,c,r,n,o,i);if(!(r&k)){var p=l&&A.call(t,"__wrapped__"),_=f&&A.call(e,"__wrapped__");if(p||_){var d=p?t.value():t,v=_?e.value():e;return i||(i=new y),o(d,v,r,n,i)}}return!!h&&(i||(i=new y),b(t,e,r,n,o,i))}},{"./_Stack":10,"./_equalArrays":72,"./_equalByTag":73,"./_equalObjects":74,"./_getTag":85,"./isArray":146,"./isBuffer":148,"./isTypedArray":156}],39:[function(t,e,r){var n=t("./_getTag"),o=t("./isObjectLike"),i="[object Map]";e.exports=function(t){return o(t)&&n(t)==i}},{"./_getTag":85,"./isObjectLike":153}],40:[function(t,e,r){var p=t("./_Stack"),_=t("./_baseIsEqual"),d=1,v=2;e.exports=function(t,e,r,n){var o=r.length,i=o,a=!n;if(null==t)return!i;for(t=Object(t);o--;){var s=r[o];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++o<i;){var c=(s=r[o])[0],u=t[c],l=s[1];if(a&&s[2]){if(void 0===u&&!(c in t))return!1}else{var f=new p;if(n)var h=n(u,l,c,t,e,f);if(!(void 0===h?_(l,u,d|v,n,f):h))return!1}}return!0}},{"./_Stack":10,"./_baseIsEqual":37}],41:[function(t,e,r){var n=t("./isFunction"),o=t("./_isMasked"),i=t("./isObject"),a=t("./_toSource"),s=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,f=u.hasOwnProperty,h=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(t){return!(!i(t)||o(t))&&(n(t)?h:s).test(a(t))}},{"./_isMasked":100,"./_toSource":136,"./isFunction":149,"./isObject":152}],42:[function(t,e,r){var n=t("./_getTag"),o=t("./isObjectLike"),i="[object Set]";e.exports=function(t){return o(t)&&n(t)==i}},{"./_getTag":85,"./isObjectLike":153}],43:[function(t,e,r){var n=t("./_baseGetTag"),o=t("./isLength"),i=t("./isObjectLike"),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(t){return i(t)&&o(t.length)&&!!a[n(t)]}},{"./_baseGetTag":34,"./isLength":150,"./isObjectLike":153}],44:[function(t,e,r){var n=t("./_baseMatches"),o=t("./_baseMatchesProperty"),i=t("./identity"),a=t("./isArray"),s=t("./property");e.exports=function(t){return"function"==typeof t?t:null==t?i:"object"==typeof t?a(t)?o(t[0],t[1]):n(t):s(t)}},{"./_baseMatches":47,"./_baseMatchesProperty":48,"./identity":144,"./isArray":146,"./property":160}],45:[function(t,e,r){var n=t("./_isPrototype"),o=t("./_nativeKeys"),i=Object.prototype.hasOwnProperty;e.exports=function(t){if(!n(t))return o(t);var e=[];for(var r in Object(t))i.call(t,r)&&"constructor"!=r&&e.push(r);return e}},{"./_isPrototype":101,"./_nativeKeys":117}],46:[function(t,e,r){var o=t("./isObject"),i=t("./_isPrototype"),a=t("./_nativeKeysIn"),s=Object.prototype.hasOwnProperty;e.exports=function(t){if(!o(t))return a(t);var e=i(t),r=[];for(var n in t)("constructor"!=n||!e&&s.call(t,n))&&r.push(n);return r}},{"./_isPrototype":101,"./_nativeKeysIn":118,"./isObject":152}],47:[function(t,e,r){var n=t("./_baseIsMatch"),o=t("./_getMatchData"),i=t("./_matchesStrictComparable");e.exports=function(e){var r=o(e);return 1==r.length&&r[0][2]?i(r[0][0],r[0][1]):function(t){return t===e||n(t,e,r)}}},{"./_baseIsMatch":40,"./_getMatchData":79,"./_matchesStrictComparable":114}],48:[function(t,e,r){var o=t("./_baseIsEqual"),i=t("./get"),a=t("./hasIn"),s=t("./_isKey"),c=t("./_isStrictComparable"),u=t("./_matchesStrictComparable"),l=t("./_toKey"),f=1,h=2;e.exports=function(r,n){return s(r)&&c(n)?u(l(r),n):function(t){var e=i(t,r);return void 0===e&&e===n?a(t,r):o(n,e,f|h)}}},{"./_baseIsEqual":37,"./_isKey":98,"./_isStrictComparable":102,"./_matchesStrictComparable":114,"./_toKey":135,"./get":142,"./hasIn":143}],49:[function(t,e,r){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},{}],50:[function(t,e,r){var n=t("./_baseGet");e.exports=function(e){return function(t){return n(t,e)}}},{"./_baseGet":32}],51:[function(t,e,r){var n=t("./identity"),o=t("./_overRest"),i=t("./_setToString");e.exports=function(t,e){return i(o(t,e,n),t+"")}},{"./_overRest":122,"./_setToString":127,"./identity":144}],52:[function(t,e,r){var n=t("./constant"),o=t("./_defineProperty"),i=t("./identity"),a=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:i;e.exports=a},{"./_defineProperty":71,"./constant":138,"./identity":144}],53:[function(t,e,r){e.exports=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}},{}],54:[function(t,e,r){var n=t("./_Symbol"),o=t("./_arrayMap"),i=t("./isArray"),a=t("./isSymbol"),s=1/0,c=n?n.prototype:void 0,u=c?c.toString:void 0;e.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(a(e))return u?u.call(e):"";var r=e+"";return"0"==r&&1/e==-s?"-0":r}},{"./_Symbol":11,"./_arrayMap":18,"./isArray":146,"./isSymbol":155}],55:[function(t,e,r){e.exports=function(e){return function(t){return e(t)}}},{}],56:[function(t,e,r){e.exports=function(t,e){return t.has(e)}},{}],57:[function(t,e,r){var n=t("./isArray"),o=t("./_isKey"),i=t("./_stringToPath"),a=t("./toString");e.exports=function(t,e){return n(t)?t:o(t,e)?[t]:i(a(t))}},{"./_isKey":98,"./_stringToPath":134,"./isArray":146,"./toString":163}],58:[function(t,e,r){var n=t("./_Uint8Array");e.exports=function(t){var e=new t.constructor(t.byteLength);return new n(e).set(new n(t)),e}},{"./_Uint8Array":12}],59:[function(t,e,r){var n=t("./_root"),o="object"==typeof r&&r&&!r.nodeType&&r,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o?n.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(t,e){if(e)return t.slice();var r=t.length,n=s?s(r):new t.constructor(r);return t.copy(n),n}},{"./_root":123}],60:[function(t,e,r){var n=t("./_cloneArrayBuffer");e.exports=function(t,e){var r=e?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}},{"./_cloneArrayBuffer":58}],61:[function(t,e,r){var n=/\w*$/;e.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},{}],62:[function(t,e,r){var n=t("./_Symbol"),o=n?n.prototype:void 0,i=o?o.valueOf:void 0;e.exports=function(t){return i?Object(i.call(t)):{}}},{"./_Symbol":11}],63:[function(t,e,r){var n=t("./_cloneArrayBuffer");e.exports=function(t,e){var r=e?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}},{"./_cloneArrayBuffer":58}],64:[function(t,e,r){e.exports=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}},{}],65:[function(t,e,r){var u=t("./_assignValue"),l=t("./_baseAssignValue");e.exports=function(t,e,r,n){var o=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var s=e[i],c=n?n(r[s],t[s],s,r,t):void 0;void 0===c&&(c=t[s]),o?l(r,s,c):u(r,s,c)}return r}},{"./_assignValue":21,"./_baseAssignValue":25}],66:[function(t,e,r){var n=t("./_copyObject"),o=t("./_getSymbols");e.exports=function(t,e){return n(t,o(t),e)}},{"./_copyObject":65,"./_getSymbols":83}],67:[function(t,e,r){var n=t("./_copyObject"),o=t("./_getSymbolsIn");e.exports=function(t,e){return n(t,o(t),e)}},{"./_copyObject":65,"./_getSymbolsIn":84}],68:[function(t,e,r){var n=t("./_root")["__core-js_shared__"];e.exports=n},{"./_root":123}],69:[function(t,e,r){var s=t("./isArrayLike");e.exports=function(i,a){return function(t,e){if(null==t)return t;if(!s(t))return i(t,e);for(var r=t.length,n=a?r:-1,o=Object(t);(a?n--:++n<r)&&!1!==e(o[n],n,o););return t}}},{"./isArrayLike":147}],70:[function(t,e,r){e.exports=function(c){return function(t,e,r){for(var n=-1,o=Object(t),i=r(t),a=i.length;a--;){var s=i[c?a:++n];if(!1===e(o[s],s,o))break}return t}}},{}],71:[function(t,e,r){var n=t("./_getNative"),o=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();e.exports=o},{"./_getNative":80}],72:[function(t,e,r){var v=t("./_SetCache"),y=t("./_arraySome"),g=t("./_cacheHas"),m=1,b=2;e.exports=function(t,e,r,n,o,i){var a=r&m,s=t.length,c=e.length;if(s!=c&&!(a&&s<c))return!1;var u=i.get(t);if(u&&i.get(e))return u==e;var l=-1,f=!0,h=r&b?new v:void 0;for(i.set(t,e),i.set(e,t);++l<s;){var p=t[l],_=e[l];if(n)var d=a?n(_,p,l,e,t,i):n(p,_,l,t,e,i);if(void 0!==d){if(d)continue;f=!1;break}if(h){if(!y(e,function(t,e){if(!g(h,e)&&(p===t||o(p,t,r,n,i)))return h.push(e)})){f=!1;break}}else if(p!==_&&!o(p,_,r,n,i)){f=!1;break}}return i.delete(t),i.delete(e),f}},{"./_SetCache":9,"./_arraySome":20,"./_cacheHas":56}],73:[function(t,e,r){var n=t("./_Symbol"),f=t("./_Uint8Array"),h=t("./eq"),p=t("./_equalArrays"),_=t("./_mapToArray"),d=t("./_setToArray"),v=1,y=2,g="[object Boolean]",m="[object Date]",b="[object Error]",j="[object Map]",w="[object Number]",x="[object RegExp]",C="[object Set]",k="[object String]",O="[object Symbol]",T="[object ArrayBuffer]",S="[object DataView]",o=n?n.prototype:void 0,A=o?o.valueOf:void 0;e.exports=function(t,e,r,n,o,i,a){switch(r){case S:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case T:return!(t.byteLength!=e.byteLength||!i(new f(t),new f(e)));case g:case m:case w:return h(+t,+e);case b:return t.name==e.name&&t.message==e.message;case x:case k:return t==e+"";case j:var s=_;case C:var c=n&v;if(s||(s=d),t.size!=e.size&&!c)return!1;var u=a.get(t);if(u)return u==e;n|=y,a.set(t,e);var l=p(s(t),s(e),n,o,i,a);return a.delete(t),l;case O:if(A)return A.call(t)==A.call(e)}return!1}},{"./_Symbol":11,"./_Uint8Array":12,"./_equalArrays":72,"./_mapToArray":113,"./_setToArray":126,"./eq":140}],74:[function(t,e,r){var m=t("./_getAllKeys"),b=1,j=Object.prototype.hasOwnProperty;e.exports=function(t,e,r,n,o,i){var a=r&b,s=m(t),c=s.length;if(c!=m(e).length&&!a)return!1;for(var u=c;u--;){var l=s[u];if(!(a?l in e:j.call(e,l)))return!1}var f=i.get(t);if(f&&i.get(e))return f==e;var h=!0;i.set(t,e),i.set(e,t);for(var p=a;++u<c;){var _=t[l=s[u]],d=e[l];if(n)var v=a?n(d,_,l,e,t,i):n(_,d,l,t,e,i);if(!(void 0===v?_===d||o(_,d,r,n,i):v)){h=!1;break}p||(p="constructor"==l)}if(h&&!p){var y=t.constructor,g=e.constructor;y!=g&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof g&&g instanceof g)&&(h=!1)}return i.delete(t),i.delete(e),h}},{"./_getAllKeys":76}],75:[function(t,r,e){(function(t){var e="object"==typeof t&&t&&t.Object===Object&&t;r.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],76:[function(t,e,r){var n=t("./_baseGetAllKeys"),o=t("./_getSymbols"),i=t("./keys");e.exports=function(t){return n(t,i,o)}},{"./_baseGetAllKeys":33,"./_getSymbols":83,"./keys":157}],77:[function(t,e,r){var n=t("./_baseGetAllKeys"),o=t("./_getSymbolsIn"),i=t("./keysIn");e.exports=function(t){return n(t,i,o)}},{"./_baseGetAllKeys":33,"./_getSymbolsIn":84,"./keysIn":158}],78:[function(t,e,r){var n=t("./_isKeyable");e.exports=function(t,e){var r=t.__data__;return n(e)?r["string"==typeof e?"string":"hash"]:r.map}},{"./_isKeyable":99}],79:[function(t,e,r){var i=t("./_isStrictComparable"),a=t("./keys");e.exports=function(t){for(var e=a(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,i(o)]}return e}},{"./_isStrictComparable":102,"./keys":157}],80:[function(t,e,r){var n=t("./_baseIsNative"),o=t("./_getValue");e.exports=function(t,e){var r=o(t,e);return n(r)?r:void 0}},{"./_baseIsNative":41,"./_getValue":86}],81:[function(t,e,r){var n=t("./_overArg")(Object.getPrototypeOf,Object);e.exports=n},{"./_overArg":121}],82:[function(t,e,r){var n=t("./_Symbol"),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=n?n.toStringTag:void 0;e.exports=function(t){var e=i.call(t,s),r=t[s];try{var n=!(t[s]=void 0)}catch(t){}var o=a.call(t);return n&&(e?t[s]=r:delete t[s]),o}},{"./_Symbol":11}],83:[function(t,e,r){var n=t("./_arrayFilter"),o=t("./stubArray"),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),n(a(e),function(t){return i.call(e,t)}))}:o;e.exports=s},{"./_arrayFilter":16,"./stubArray":161}],84:[function(t,e,r){var n=t("./_arrayPush"),o=t("./_getPrototype"),i=t("./_getSymbols"),a=t("./stubArray"),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)n(e,i(t)),t=o(t);return e}:a;e.exports=s},{"./_arrayPush":19,"./_getPrototype":81,"./_getSymbols":83,"./stubArray":161}],85:[function(t,e,r){var n=t("./_DataView"),o=t("./_Map"),i=t("./_Promise"),a=t("./_Set"),s=t("./_WeakMap"),c=t("./_baseGetTag"),u=t("./_toSource"),l="[object Map]",f="[object Promise]",h="[object Set]",p="[object WeakMap]",_="[object DataView]",d=u(n),v=u(o),y=u(i),g=u(a),m=u(s),b=c;(n&&b(new n(new ArrayBuffer(1)))!=_||o&&b(new o)!=l||i&&b(i.resolve())!=f||a&&b(new a)!=h||s&&b(new s)!=p)&&(b=function(t){var e=c(t),r="[object Object]"==e?t.constructor:void 0,n=r?u(r):"";if(n)switch(n){case d:return _;case v:return l;case y:return f;case g:return h;case m:return p}return e}),e.exports=b},{"./_DataView":2,"./_Map":5,"./_Promise":7,"./_Set":8,"./_WeakMap":13,"./_baseGetTag":34,"./_toSource":136}],86:[function(t,e,r){e.exports=function(t,e){return null==t?void 0:t[e]}},{}],87:[function(t,e,r){var s=t("./_castPath"),c=t("./isArguments"),u=t("./isArray"),l=t("./_isIndex"),f=t("./isLength"),h=t("./_toKey");e.exports=function(t,e,r){for(var n=-1,o=(e=s(e,t)).length,i=!1;++n<o;){var a=h(e[n]);if(!(i=null!=t&&r(t,a)))break;t=t[a]}return i||++n!=o?i:!!(o=null==t?0:t.length)&&f(o)&&l(a,o)&&(u(t)||c(t))}},{"./_castPath":57,"./_isIndex":96,"./_toKey":135,"./isArguments":145,"./isArray":146,"./isLength":150}],88:[function(t,e,r){var n=t("./_nativeCreate");e.exports=function(){this.__data__=n?n(null):{},this.size=0}},{"./_nativeCreate":116}],89:[function(t,e,r){e.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},{}],90:[function(t,e,r){var n=t("./_nativeCreate"),o="__lodash_hash_undefined__",i=Object.prototype.hasOwnProperty;e.exports=function(t){var e=this.__data__;if(n){var r=e[t];return r===o?void 0:r}return i.call(e,t)?e[t]:void 0}},{"./_nativeCreate":116}],91:[function(t,e,r){var n=t("./_nativeCreate"),o=Object.prototype.hasOwnProperty;e.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:o.call(e,t)}},{"./_nativeCreate":116}],92:[function(t,e,r){var n=t("./_nativeCreate"),o="__lodash_hash_undefined__";e.exports=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=n&&void 0===e?o:e,this}},{"./_nativeCreate":116}],93:[function(t,e,r){var n=Object.prototype.hasOwnProperty;e.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},{}],94:[function(t,e,r){var o=t("./_cloneArrayBuffer"),i=t("./_cloneDataView"),a=t("./_cloneRegExp"),s=t("./_cloneSymbol"),c=t("./_cloneTypedArray"),u="[object Boolean]",l="[object Date]",f="[object Map]",h="[object Number]",p="[object RegExp]",_="[object Set]",d="[object String]",v="[object Symbol]",y="[object ArrayBuffer]",g="[object DataView]",m="[object Float32Array]",b="[object Float64Array]",j="[object Int8Array]",w="[object Int16Array]",x="[object Int32Array]",C="[object Uint8Array]",k="[object Uint8ClampedArray]",O="[object Uint16Array]",T="[object Uint32Array]";e.exports=function(t,e,r){var n=t.constructor;switch(e){case y:return o(t);case u:case l:return new n(+t);case g:return i(t,r);case m:case b:case j:case w:case x:case C:case k:case O:case T:return c(t,r);case f:return new n;case h:case d:return new n(t);case p:return a(t);case _:return new n;case v:return s(t)}}},{"./_cloneArrayBuffer":58,"./_cloneDataView":60,"./_cloneRegExp":61,"./_cloneSymbol":62,"./_cloneTypedArray":63}],95:[function(t,e,r){var n=t("./_baseCreate"),o=t("./_getPrototype"),i=t("./_isPrototype");e.exports=function(t){return"function"!=typeof t.constructor||i(t)?{}:n(o(t))}},{"./_baseCreate":27,"./_getPrototype":81,"./_isPrototype":101}],96:[function(t,e,r){var n=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=function(t,e){var r=typeof t;return!!(e=null==e?n:e)&&("number"==r||"symbol"!=r&&o.test(t))&&-1<t&&t%1==0&&t<e}},{}],97:[function(t,e,r){var o=t("./eq"),i=t("./isArrayLike"),a=t("./_isIndex"),s=t("./isObject");e.exports=function(t,e,r){if(!s(r))return!1;var n=typeof e;return!!("number"==n?i(r)&&a(e,r.length):"string"==n&&e in r)&&o(r[e],t)}},{"./_isIndex":96,"./eq":140,"./isArrayLike":147,"./isObject":152}],98:[function(t,e,r){var n=t("./isArray"),o=t("./isSymbol"),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(t,e){if(n(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!o(t))||a.test(t)||!i.test(t)||null!=e&&t in Object(e)}},{"./isArray":146,"./isSymbol":155}],99:[function(t,e,r){e.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},{}],100:[function(t,e,r){var n,o=t("./_coreJsData"),i=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(t){return!!i&&i in t}},{"./_coreJsData":68}],101:[function(t,e,r){var n=Object.prototype;e.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},{}],102:[function(t,e,r){var n=t("./isObject");e.exports=function(t){return t==t&&!n(t)}},{"./isObject":152}],103:[function(t,e,r){e.exports=function(){this.__data__=[],this.size=0}},{}],104:[function(t,e,r){var n=t("./_assocIndexOf"),o=Array.prototype.splice;e.exports=function(t){var e=this.__data__,r=n(e,t);return!(r<0||(r==e.length-1?e.pop():o.call(e,r,1),--this.size,0))}},{"./_assocIndexOf":22}],105:[function(t,e,r){var n=t("./_assocIndexOf");e.exports=function(t){var e=this.__data__,r=n(e,t);return r<0?void 0:e[r][1]}},{"./_assocIndexOf":22}],106:[function(t,e,r){var n=t("./_assocIndexOf");e.exports=function(t){return-1<n(this.__data__,t)}},{"./_assocIndexOf":22}],107:[function(t,e,r){var o=t("./_assocIndexOf");e.exports=function(t,e){var r=this.__data__,n=o(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}},{"./_assocIndexOf":22}],108:[function(t,e,r){var n=t("./_Hash"),o=t("./_ListCache"),i=t("./_Map");e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||o),string:new n}}},{"./_Hash":3,"./_ListCache":4,"./_Map":5}],109:[function(t,e,r){var n=t("./_getMapData");e.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}},{"./_getMapData":78}],110:[function(t,e,r){var n=t("./_getMapData");e.exports=function(t){return n(this,t).get(t)}},{"./_getMapData":78}],111:[function(t,e,r){var n=t("./_getMapData");e.exports=function(t){return n(this,t).has(t)}},{"./_getMapData":78}],112:[function(t,e,r){var o=t("./_getMapData");e.exports=function(t,e){var r=o(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}},{"./_getMapData":78}],113:[function(t,e,r){e.exports=function(t){var r=-1,n=Array(t.size);return t.forEach(function(t,e){n[++r]=[e,t]}),n}},{}],114:[function(t,e,r){e.exports=function(e,r){return function(t){return null!=t&&t[e]===r&&(void 0!==r||e in Object(t))}}},{}],115:[function(t,e,r){var n=t("./memoize"),o=500;e.exports=function(t){var e=n(t,function(t){return r.size===o&&r.clear(),t}),r=e.cache;return e}},{"./memoize":159}],116:[function(t,e,r){var n=t("./_getNative")(Object,"create");e.exports=n},{"./_getNative":80}],117:[function(t,e,r){var n=t("./_overArg")(Object.keys,Object);e.exports=n},{"./_overArg":121}],118:[function(t,e,r){e.exports=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}},{}],119:[function(t,e,r){var n=t("./_freeGlobal"),o="object"==typeof r&&r&&!r.nodeType&&r,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o&&n.process,s=function(){try{return a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=s},{"./_freeGlobal":75}],120:[function(t,e,r){var n=Object.prototype.toString;e.exports=function(t){return n.call(t)}},{}],121:[function(t,e,r){e.exports=function(e,r){return function(t){return e(r(t))}}},{}],122:[function(t,e,r){var c=t("./_apply"),u=Math.max;e.exports=function(i,a,s){return a=u(void 0===a?i.length-1:a,0),function(){for(var t=arguments,e=-1,r=u(t.length-a,0),n=Array(r);++e<r;)n[e]=t[a+e];e=-1;for(var o=Array(a+1);++e<a;)o[e]=t[e];return o[a]=s(n),c(i,this,o)}}},{"./_apply":14}],123:[function(t,e,r){var n=t("./_freeGlobal"),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();e.exports=i},{"./_freeGlobal":75}],124:[function(t,e,r){var n="__lodash_hash_undefined__";e.exports=function(t){return this.__data__.set(t,n),this}},{}],125:[function(t,e,r){e.exports=function(t){return this.__data__.has(t)}},{}],126:[function(t,e,r){e.exports=function(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}},{}],127:[function(t,e,r){var n=t("./_baseSetToString"),o=t("./_shortOut")(n);e.exports=o},{"./_baseSetToString":52,"./_shortOut":128}],128:[function(t,e,r){var i=800,a=16,s=Date.now;e.exports=function(r){var n=0,o=0;return function(){var t=s(),e=a-(t-o);if(o=t,0<e){if(++n>=i)return arguments[0]}else n=0;return r.apply(void 0,arguments)}}},{}],129:[function(t,e,r){var n=t("./_ListCache");e.exports=function(){this.__data__=new n,this.size=0}},{"./_ListCache":4}],130:[function(t,e,r){e.exports=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}},{}],131:[function(t,e,r){e.exports=function(t){return this.__data__.get(t)}},{}],132:[function(t,e,r){e.exports=function(t){return this.__data__.has(t)}},{}],133:[function(t,e,r){var o=t("./_ListCache"),i=t("./_Map"),a=t("./_MapCache"),s=200;e.exports=function(t,e){var r=this.__data__;if(r instanceof o){var n=r.__data__;if(!i||n.length<s-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new a(n)}return r.set(t,e),this.size=r.size,this}},{"./_ListCache":4,"./_Map":5,"./_MapCache":6}],134:[function(t,e,r){var n=t("./_memoizeCapped"),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=n(function(t){var o=[];return 46===t.charCodeAt(0)&&o.push(""),t.replace(i,function(t,e,r,n){o.push(r?n.replace(a,"$1"):e||t)}),o});e.exports=o},{"./_memoizeCapped":115}],135:[function(t,e,r){var n=t("./isSymbol"),o=1/0;e.exports=function(t){if("string"==typeof t||n(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}},{"./isSymbol":155}],136:[function(t,e,r){var n=Function.prototype.toString;e.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},{}],137:[function(t,e,r){var n=t("./_baseClone"),o=4;e.exports=function(t){return n(t,o)}},{"./_baseClone":26}],138:[function(t,e,r){e.exports=function(t){return function(){return t}}},{}],139:[function(t,e,r){var n=t("./_baseRest"),f=t("./eq"),h=t("./_isIterateeCall"),p=t("./keysIn"),_=Object.prototype,d=_.hasOwnProperty,o=n(function(t,e){t=Object(t);var r=-1,n=e.length,o=2<n?e[2]:void 0;for(o&&h(e[0],e[1],o)&&(n=1);++r<n;)for(var i=e[r],a=p(i),s=-1,c=a.length;++s<c;){var u=a[s],l=t[u];(void 0===l||f(l,_[u])&&!d.call(t,u))&&(t[u]=i[u])}return t});e.exports=o},{"./_baseRest":51,"./_isIterateeCall":97,"./eq":140,"./keysIn":158}],140:[function(t,e,r){e.exports=function(t,e){return t===e||t!=t&&e!=e}},{}],141:[function(t,e,r){var n=t("./_arrayFilter"),o=t("./_baseFilter"),i=t("./_baseIteratee"),a=t("./isArray");e.exports=function(t,e){return(a(t)?n:o)(t,i(e,3))}},{"./_arrayFilter":16,"./_baseFilter":29,"./_baseIteratee":44,"./isArray":146}],142:[function(t,e,r){var o=t("./_baseGet");e.exports=function(t,e,r){var n=null==t?void 0:o(t,e);return void 0===n?r:n}},{"./_baseGet":32}],143:[function(t,e,r){var n=t("./_baseHasIn"),o=t("./_hasPath");e.exports=function(t,e){return null!=t&&o(t,e,n)}},{"./_baseHasIn":35,"./_hasPath":87}],144:[function(t,e,r){e.exports=function(t){return t}},{}],145:[function(t,e,r){var n=t("./_baseIsArguments"),o=t("./isObjectLike"),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(t){return o(t)&&a.call(t,"callee")&&!s.call(t,"callee")};e.exports=c},{"./_baseIsArguments":36,"./isObjectLike":153}],146:[function(t,e,r){var n=Array.isArray;e.exports=n},{}],147:[function(t,e,r){var n=t("./isFunction"),o=t("./isLength");e.exports=function(t){return null!=t&&o(t.length)&&!n(t)}},{"./isFunction":149,"./isLength":150}],148:[function(t,e,r){var n=t("./_root"),o=t("./stubFalse"),i="object"==typeof r&&r&&!r.nodeType&&r,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i?n.Buffer:void 0,c=(s?s.isBuffer:void 0)||o;e.exports=c},{"./_root":123,"./stubFalse":162}],149:[function(t,e,r){var n=t("./_baseGetTag"),o=t("./isObject"),i="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",c="[object Proxy]";e.exports=function(t){if(!o(t))return!1;var e=n(t);return e==a||e==s||e==i||e==c}},{"./_baseGetTag":34,"./isObject":152}],150:[function(t,e,r){var n=9007199254740991;e.exports=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=n}},{}],151:[function(t,e,r){var n=t("./_baseIsMap"),o=t("./_baseUnary"),i=t("./_nodeUtil"),a=i&&i.isMap,s=a?o(a):n;e.exports=s},{"./_baseIsMap":39,"./_baseUnary":55,"./_nodeUtil":119}],152:[function(t,e,r){e.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},{}],153:[function(t,e,r){e.exports=function(t){return null!=t&&"object"==typeof t}},{}],154:[function(t,e,r){var n=t("./_baseIsSet"),o=t("./_baseUnary"),i=t("./_nodeUtil"),a=i&&i.isSet,s=a?o(a):n;e.exports=s},{"./_baseIsSet":42,"./_baseUnary":55,"./_nodeUtil":119}],155:[function(t,e,r){var n=t("./_baseGetTag"),o=t("./isObjectLike"),i="[object Symbol]";e.exports=function(t){return"symbol"==typeof t||o(t)&&n(t)==i}},{"./_baseGetTag":34,"./isObjectLike":153}],156:[function(t,e,r){var n=t("./_baseIsTypedArray"),o=t("./_baseUnary"),i=t("./_nodeUtil"),a=i&&i.isTypedArray,s=a?o(a):n;e.exports=s},{"./_baseIsTypedArray":43,"./_baseUnary":55,"./_nodeUtil":119}],157:[function(t,e,r){var n=t("./_arrayLikeKeys"),o=t("./_baseKeys"),i=t("./isArrayLike");e.exports=function(t){return i(t)?n(t):o(t)}},{"./_arrayLikeKeys":17,"./_baseKeys":45,"./isArrayLike":147}],158:[function(t,e,r){var n=t("./_arrayLikeKeys"),o=t("./_baseKeysIn"),i=t("./isArrayLike");e.exports=function(t){return i(t)?n(t,!0):o(t)}},{"./_arrayLikeKeys":17,"./_baseKeysIn":46,"./isArrayLike":147}],159:[function(t,e,r){var n=t("./_MapCache"),s="Expected a function";function c(o,i){if("function"!=typeof o||null!=i&&"function"!=typeof i)throw new TypeError(s);var a=function(){var t=arguments,e=i?i.apply(this,t):t[0],r=a.cache;if(r.has(e))return r.get(e);var n=o.apply(this,t);return a.cache=r.set(e,n)||r,n};return a.cache=new(c.Cache||n),a}c.Cache=n,e.exports=c},{"./_MapCache":6}],160:[function(t,e,r){var n=t("./_baseProperty"),o=t("./_basePropertyDeep"),i=t("./_isKey"),a=t("./_toKey");e.exports=function(t){return i(t)?n(a(t)):o(t)}},{"./_baseProperty":49,"./_basePropertyDeep":50,"./_isKey":98,"./_toKey":135}],161:[function(t,e,r){e.exports=function(){return[]}},{}],162:[function(t,e,r){e.exports=function(){return!1}},{}],163:[function(t,e,r){var n=t("./_baseToString");e.exports=function(t){return null==t?"":n(t)}},{"./_baseToString":54}],164:[function(t,e,r){"use strict";var n=t("./vibrant"),o=t("./image/browser");n.default.DefaultOpts.ImageClass=o.default,e.exports=n.default},{"./image/browser":172,"./vibrant":178}],165:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("lodash/clone"),o=t("./vibrant"),i=function(){function t(t,e){void 0===e&&(e={}),this._src=t,this._opts=e,this._opts.filters=n(o.default.DefaultOpts.filters)}return t.prototype.maxColorCount=function(t){return this._opts.colorCount=t,this},t.prototype.maxDimension=function(t){return this._opts.maxDimension=t,this},t.prototype.addFilter=function(t){return this._opts.filters.push(t),this},t.prototype.removeFilter=function(t){var e=this._opts.filters.indexOf(t);return 0<e&&this._opts.filters.splice(e),this},t.prototype.clearFilters=function(){return this._opts.filters=[],this},t.prototype.quality=function(t){return this._opts.quality=t,this},t.prototype.useImageClass=function(t){return this._opts.ImageClass=t,this},t.prototype.useGenerator=function(t){return this._opts.generator=t,this},t.prototype.useQuantizer=function(t){return this._opts.quantizer=t,this},t.prototype.build=function(){return new o.default(this._src,this._opts)},t.prototype.getPalette=function(t){return this.build().getPalette(t)},t.prototype.getSwatches=function(t){return this.build().getPalette(t)},t}();r.default=i},{"./vibrant":178,"lodash/clone":137}],166:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("./util"),n=t("lodash/filter"),i=function(){function t(t,e){this._rgb=t,this._population=e}return t.applyFilter=function(t,o){return"function"==typeof o?n(t,function(t){var e=t.r,r=t.g,n=t.b;return o(e,r,n,255)}):t},Object.defineProperty(t.prototype,"r",{get:function(){return this._rgb[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"g",{get:function(){return this._rgb[1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this._rgb[2]},enumerable:!0,configurable:!0}),t.prototype.getRgb=function(){return this._rgb},t.prototype.getHsl=function(){if(!this._hsl){var t=this._rgb,e=t[0],r=t[1],n=t[2];this._hsl=o.rgbToHsl(e,r,n)}return this._hsl},t.prototype.getPopulation=function(){return this._population},t.prototype.getHex=function(){if(!this._hex){var t=this._rgb,e=t[0],r=t[1],n=t[2];this._hex=o.rgbToHex(e,r,n)}return this._hex},t.prototype.getYiq=function(){if(!this._yiq){var t=this._rgb;this._yiq=(299*t[0]+587*t[1]+114*t[2])/1e3}return this._yiq},t.prototype.getTitleTextColor=function(){return this.getYiq()<200?"#fff":"#000"},t.prototype.getBodyTextColor=function(){return this.getYiq()<150?"#fff":"#000"},t}();r.Swatch=i},{"./util":177,"lodash/filter":141}],167:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e,r,n){return 125<=n&&!(250<t&&250<e&&250<r)}},{}],168:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./default");r.Default=n.default,r.combineFilters=function(i){return Array.isArray(i)&&0!==i.length?function(t,e,r,n){if(0===n)return!1;for(var o=0;o<i.length;o++)if(!i[o](t,e,r,n))return!1;return!0}:null}},{"./default":167}],169:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var u=t("../color"),l=t("../util"),f=t("lodash/defaults"),h={targetDarkLuma:.26,maxDarkLuma:.45,minLightLuma:.55,targetLightLuma:.74,minNormalLuma:.3,targetNormalLuma:.5,maxNormalLuma:.7,targetMutesSaturation:.3,maxMutesSaturation:.4,targetVibrantSaturation:1,minVibrantSaturation:.35,weightSaturation:3,weightLuma:6.5,weightPopulation:.5};function p(s,t,c,u,l,f,h,p,_,d){var v=null,y=0;return t.forEach(function(t){var e,r,n=t.getHsl(),o=n[1],i=n[2];if(p<=o&&o<=_&&l<=i&&i<=f&&(r=t,(e=s).Vibrant!==r&&e.DarkVibrant!==r&&e.LightVibrant!==r&&e.Muted!==r&&e.DarkMuted!==r&&e.LightMuted!==r)){var a=function(t,e,r,n,o,i,a){function s(t,e){return 1-Math.abs(t-e)}return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0,n=0,o=0;o<t.length;o+=2){var i=t[o],a=t[o+1];r+=i*a,n+=a}return r/n}(s(t,e),a.weightSaturation,s(r,n),a.weightLuma,o/i,a.weightPopulation)}(o,h,i,u,t.getPopulation(),c,d);(null===v||y<a)&&(v=t,y=a)}}),v}r.default=function(t,e){e=f({},e,h);var r,n,o,i,a,s=(r=0,t.forEach(function(t){r=Math.max(r,t.getPopulation())}),r),c=((a={}).Vibrant=p(a,n=t,o=s,(i=e).targetNormalLuma,i.minNormalLuma,i.maxNormalLuma,i.targetVibrantSaturation,i.minVibrantSaturation,1,i),a.LightVibrant=p(a,n,o,i.targetLightLuma,i.minLightLuma,1,i.targetVibrantSaturation,i.minVibrantSaturation,1,i),a.DarkVibrant=p(a,n,o,i.targetDarkLuma,0,i.maxDarkLuma,i.targetVibrantSaturation,i.minVibrantSaturation,1,i),a.Muted=p(a,n,o,i.targetNormalLuma,i.minNormalLuma,i.maxNormalLuma,i.targetMutesSaturation,0,i.maxMutesSaturation,i),a.LightMuted=p(a,n,o,i.targetLightLuma,i.minLightLuma,1,i.targetMutesSaturation,0,i.maxMutesSaturation,i),a.DarkMuted=p(a,n,o,i.targetDarkLuma,0,i.maxDarkLuma,i.targetMutesSaturation,0,i.maxMutesSaturation,i),a);return function(t,e,r){if(null===t.Vibrant&&null!==t.DarkVibrant){var n=t.DarkVibrant.getHsl(),o=n[0],i=n[1],a=n[2];a=r.targetNormalLuma,t.Vibrant=new u.Swatch(l.hslToRgb(o,i,a),0)}if(null===t.DarkVibrant&&null!==t.Vibrant){var s=t.Vibrant.getHsl();o=s[0],i=s[1],a=s[2],a=r.targetDarkLuma,t.DarkVibrant=new u.Swatch(l.hslToRgb(o,i,a),0)}}(c,0,e),c}},{"../color":166,"../util":177,"lodash/defaults":139}],170:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./default");r.Default=n.default},{"./default":169}],171:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("bluebird"),n=function(){function t(){}return t.prototype.scaleDown=function(t){var e=this.getWidth(),r=this.getHeight(),n=1;if(0<t.maxDimension){var o=Math.max(e,r);o>t.maxDimension&&(n=t.maxDimension/o)}else n=1/t.quality;n<1&&this.resize(e*n,r*n,n)},t.prototype.applyFilter=function(t){var e=this.getImageData();if("function"==typeof t)for(var r=e.data,n=r.length/4,o=void 0,i=0;i<n;i++)t(r[(o=4*i)+0],r[o+1],r[o+2],r[o+3])||(r[o+3]=0);return a.resolve(e)},t}();r.ImageBase=n},{bluebird:1}],172:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var l=t("bluebird"),i=t("./base"),f=t("url");var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._initCanvas=function(){var t=this.image,e=this._canvas=document.createElement("canvas"),r=this._context=e.getContext("2d");e.className="vibrant-canvas",e.style.display="none",this._width=e.width=t.width,this._height=e.height=t.height,r.drawImage(t,0,0),document.body.appendChild(e)},e.prototype.load=function(t){var e,r,n,o,i,a,s=this,c=null,u=null;if("string"==typeof t)c=document.createElement("img"),u=t;else{if(!(t instanceof HTMLImageElement))return l.reject(new Error("Cannot load buffer as an image in browser"));u=(c=t).src}return this.image=c,i=u,null===(a=f.parse(i)).protocol&&null===a.host&&null===a.port||(e=window.location.href,r=u,n=f.parse(e),o=f.parse(r),n.protocol===o.protocol&&n.hostname===o.hostname&&n.port===o.port)||(c.crossOrigin="anonymous"),"string"==typeof t&&(c.src=u),new l(function(t,e){var r=function(){s._initCanvas(),t(s)};c.complete?r():(c.onload=r,c.onerror=function(t){return e(new Error("Fail to load image: "+u))})})},e.prototype.clear=function(){this._context.clearRect(0,0,this._width,this._height)},e.prototype.update=function(t){this._context.putImageData(t,0,0)},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.resize=function(t,e,r){var n=this._canvas,o=this._context,i=this.image;this._width=n.width=t,this._height=n.height=e,o.scale(r,r),o.drawImage(i,0,0)},e.prototype.getPixelCount=function(){return this._width*this._height},e.prototype.getImageData=function(){return this._context.getImageData(0,0,this._width,this._height)},e.prototype.remove=function(){this._canvas.parentNode.removeChild(this._canvas)},e}(i.ImageBase);r.default=a},{"./base":171,bluebird:1,url:185}],173:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./mmcq");r.MMCQ=n.default,r.WebWorker=null},{"./mmcq":174}],174:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("../color"),s=t("./vbox"),c=t("./pqueue");function u(t,e){for(var r=t.size();t.size()<e;){var n=t.pop();if(!(n&&0<n.count()))break;var o=n.split(),i=o[0],a=o[1];if(t.push(i),a&&0<a.count()&&t.push(a),t.size()===r)break;r=t.size()}}r.default=function(t,e){if(0===t.length||e.colorCount<2||256<e.colorCount)throw new Error("Wrong MMCQ parameters");var r=s.default.build(t),n=r.hist,o=(Object.keys(n).length,new c.default(function(t,e){return t.count()-e.count()}));o.push(r),u(o,.75*e.colorCount);var i=new c.default(function(t,e){return t.count()*t.volume()-e.count()*e.volume()});return i.contents=o.contents,u(i,e.colorCount-i.size()),function(t){for(var e=[];t.size();){var r=t.pop(),n=r.avg();n[0],n[1],n[2],e.push(new a.Swatch(n,r.count()))}return e}(i)}},{"../color":166,"./pqueue":175,"./vbox":176}],175:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(t){this._comparator=t,this.contents=[],this._sorted=!1}return t.prototype._sort=function(){this._sorted||(this.contents.sort(this._comparator),this._sorted=!0)},t.prototype.push=function(t){this.contents.push(t),this._sorted=!1},t.prototype.peek=function(t){return this._sort(),t="number"==typeof t?t:this.contents.length-1,this.contents[t]},t.prototype.pop=function(){return this._sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this._sort(),this.contents.map(t)},t}();r.default=n},{}],176:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var k=t("../util"),n=function(){function v(t,e,r,n,o,i,a){this._volume=-1,this._count=-1,this.dimension={r1:t,r2:e,g1:r,g2:n,b1:o,b2:i},this.hist=a}return v.build=function(t,e){var r,n,o,i,a,s,c,u,l,f=1<<3*k.SIGBITS,h=new Uint32Array(f);r=o=a=0,n=i=s=Number.MAX_VALUE;for(var p=t.length/4,_=0;_<p;){var d=4*_;if(_++,c=t[d+0],u=t[d+1],l=t[d+2],0!==t[d+3])c>>=k.RSHIFT,u>>=k.RSHIFT,l>>=k.RSHIFT,h[k.getColorIndex(c,u,l)]+=1,r<c&&(r=c),c<n&&(n=c),o<u&&(o=u),u<i&&(i=u),a<l&&(a=l),l<s&&(s=l)}return new v(n,r,i,o,s,a,h)},v.prototype.invalidate=function(){this._volume=this._count=-1,this._avg=null},v.prototype.volume=function(){if(this._volume<0){var t=this.dimension,e=t.r1,r=t.r2,n=t.g1,o=t.g2,i=t.b1,a=t.b2;this._volume=(r-e+1)*(o-n+1)*(a-i+1)}return this._volume},v.prototype.count=function(){if(this._count<0){for(var t=this.hist,e=this.dimension,r=e.r1,n=e.r2,o=e.g1,i=e.g2,a=e.b1,s=e.b2,c=0,u=r;u<=n;u++)for(var l=o;l<=i;l++)for(var f=a;f<=s;f++){c+=t[k.getColorIndex(u,l,f)]}this._count=c}return this._count},v.prototype.clone=function(){var t=this.hist,e=this.dimension;return new v(e.r1,e.r2,e.g1,e.g2,e.b1,e.b2,t)},v.prototype.avg=function(){if(!this._avg){var t=this.hist,e=this.dimension,r=e.r1,n=e.r2,o=e.g1,i=e.g2,a=e.b1,s=e.b2,c=0,u=1<<8-k.SIGBITS,l=void 0,f=void 0,h=void 0;l=f=h=0;for(var p=r;p<=n;p++)for(var _=o;_<=i;_++)for(var d=a;d<=s;d++){var v=t[k.getColorIndex(p,_,d)];c+=v,l+=v*(p+.5)*u,f+=v*(_+.5)*u,h+=v*(d+.5)*u}this._avg=c?[~~(l/c),~~(f/c),~~(h/c)]:[~~(u*(r+n+1)/2),~~(u*(o+i+1)/2),~~(u*(a+s+1)/2)]}return this._avg},v.prototype.contains=function(t){var e=t[0],r=t[1],n=t[2],o=this.dimension,i=o.r1,a=o.r2,s=o.g1,c=o.g2,u=o.b1,l=o.b2;return e>>=k.RSHIFT,r>>=k.RSHIFT,n>>=k.RSHIFT,i<=e&&e<=a&&s<=r&&r<=c&&u<=n&&n<=l},v.prototype.split=function(){var t=this.hist,e=this.dimension,r=e.r1,n=e.r2,o=e.g1,i=e.g2,a=e.b1,s=e.b2,c=this.count();if(!c)return[];if(1===c)return[this.clone()];var u,l,f=n-r+1,h=i-o+1,p=s-a+1,_=Math.max(f,h,p),d=null;u=l=0;var v=null;if(_===f){v="r",d=new Uint32Array(n+1);for(var y=r;y<=n;y++){u=0;for(var g=o;g<=i;g++)for(var m=a;m<=s;m++){u+=t[k.getColorIndex(y,g,m)]}l+=u,d[y]=l}}else if(_===h){v="g",d=new Uint32Array(i+1);for(g=o;g<=i;g++){u=0;for(y=r;y<=n;y++)for(m=a;m<=s;m++){u+=t[k.getColorIndex(y,g,m)]}l+=u,d[g]=l}}else{v="b",d=new Uint32Array(s+1);for(m=a;m<=s;m++){u=0;for(y=r;y<=n;y++)for(g=o;g<=i;g++){u+=t[k.getColorIndex(y,g,m)]}l+=u,d[m]=l}}for(var b=-1,j=new Uint32Array(d.length),w=0;w<d.length;w++){var x=d[w];b<0&&l/2<x&&(b=w),j[w]=l-x}var C=this;return function(t){var e=t+"1",r=t+"2",n=C.dimension[e],o=C.dimension[r],i=C.clone(),a=C.clone(),s=b-n,c=o-b;for(s<=c?(o=Math.min(o-1,~~(b+c/2)),o=Math.max(0,o)):(o=Math.max(n,~~(b-1-s/2)),o=Math.min(C.dimension[r],o));!d[o];)o++;for(var u=j[o];!u&&d[o-1];)u=j[--o];return i.dimension[r]=o,a.dimension[e]=o+1,[i,a]}(v)},v}();r.default=n},{"../util":177}],177:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("bluebird");function r(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return null===e?null:[e[1],e[2],e[3]].map(function(t){return parseInt(t,16)})}function i(t,e,r){return e/=255,r/=255,t=.04045<(t/=255)?Math.pow((t+.005)/1.055,2.4):t/12.92,e=.04045<e?Math.pow((e+.005)/1.055,2.4):e/12.92,r=.04045<r?Math.pow((r+.005)/1.055,2.4):r/12.92,[.4124*(t*=100)+.3576*(e*=100)+.1805*(r*=100),.2126*t+.7152*e+.0722*r,.0193*t+.1192*e+.9505*r]}function a(t,e,r){return e/=100,r/=108.883,t=.008856<(t/=95.047)?Math.pow(t,1/3):7.787*t+16/116,[116*(e=.008856<e?Math.pow(e,1/3):7.787*e+16/116)-16,500*(t-e),200*(e-(r=.008856<r?Math.pow(r,1/3):7.787*r+16/116))]}function s(t,e,r){var n=i(t,e,r);return a(n[0],n[1],n[2])}function c(t,e){var r=t[0],n=t[1],o=t[2],i=e[0],a=e[1],s=e[2],c=r-i,u=n-a,l=o-s,f=Math.sqrt(n*n+o*o),h=i-r,p=Math.sqrt(a*a+s*s)-f,_=Math.sqrt(c*c+u*u+l*l),d=Math.sqrt(_)>Math.sqrt(Math.abs(h))+Math.sqrt(Math.abs(p))?Math.sqrt(_*_-h*h-p*p):0;return h/=1,p/=1*(1+.045*f),d/=1*(1+.015*f),Math.sqrt(h*h+p*p+d*d)}function u(t,e){return c(s.apply(void 0,t),s.apply(void 0,e))}n.DELTAE94_DIFF_STATUS={NA:0,PERFECT:1,CLOSE:2,GOOD:10,SIMILAR:50},n.SIGBITS=5,n.RSHIFT=8-n.SIGBITS,n.defer=function(){var r,n,t=new o(function(t,e){r=t,n=e});return{resolve:r,reject:n,promise:t}},n.hexToRgb=r,n.rgbToHex=function(t,e,r){return"#"+((1<<24)+(t<<16)+(e<<8)+r).toString(16).slice(1,7)},n.rgbToHsl=function(t,e,r){t/=255,e/=255,r/=255;var n,o,i=Math.max(t,e,r),a=Math.min(t,e,r),s=(i+a)/2;if(i===a)n=o=0;else{var c=i-a;switch(o=.5<s?c/(2-i-a):c/(i+a),i){case t:n=(e-r)/c+(e<r?6:0);break;case e:n=(r-t)/c+2;break;case r:n=(t-e)/c+4}n/=6}return[n,o,s]},n.hslToRgb=function(t,e,r){var n,o,i;function a(t,e,r){return r<0&&(r+=1),1<r&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}if(0===e)n=o=i=r;else{var s=r<.5?r*(1+e):r+e-r*e,c=2*r-s;n=a(c,s,t+1/3),o=a(c,s,t),i=a(c,s,t-1/3)}return[255*n,255*o,255*i]},n.rgbToXyz=i,n.xyzToCIELab=a,n.rgbToCIELab=s,n.deltaE94=c,n.rgbDiff=u,n.hexDiff=function(t,e){return u(r(t),r(e))},n.getColorDiffStatus=function(t){return t<n.DELTAE94_DIFF_STATUS.NA?"N/A":t<=n.DELTAE94_DIFF_STATUS.PERFECT?"Perfect":t<=n.DELTAE94_DIFF_STATUS.CLOSE?"Close":t<=n.DELTAE94_DIFF_STATUS.GOOD?"Good":t<n.DELTAE94_DIFF_STATUS.SIMILAR?"Similar":"Wrong"},n.getColorIndex=function(t,e,r){return(t<<2*n.SIGBITS)+(e<<n.SIGBITS)+r}},{bluebird:1}],178:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("./color"),i=t("bluebird"),n=t("lodash/defaults"),a=t("./builder"),s=t("./util"),c=t("./quantizer"),u=t("./generator"),l=t("./filter"),f=function(){function r(t,e){this._src=t,this.opts=n({},e,r.DefaultOpts),this.opts.combinedFilter=l.combineFilters(this.opts.filters)}return r.from=function(t){return new a.default(t)},r.prototype._process=function(t,e){var r=e.quantizer,n=e.generator;return t.scaleDown(e),t.applyFilter(e.combinedFilter).then(function(t){return r(t.data,e)}).then(function(t){return o.Swatch.applyFilter(t,e.combinedFilter)}).then(function(t){return i.resolve(n(t))})},r.prototype.palette=function(){return this.swatches()},r.prototype.swatches=function(){return this._palette},r.prototype.getPalette=function(t){var e=this,r=new this.opts.ImageClass;return r.load(this._src).then(function(t){return e._process(t,e.opts)}).tap(function(t){return e._palette=t}).finally(function(){return r.remove()}).asCallback(t)},r.Builder=a.default,r.Quantizer=c,r.Generator=u,r.Filter=l,r.Util=s,r.DefaultOpts={colorCount:64,quality:5,generator:u.Default,ImageClass:null,quantizer:c.MMCQ,filters:[l.Default]},r}();r.default=f},{"./builder":165,"./color":166,"./filter":168,"./generator":170,"./quantizer":173,"./util":177,bluebird:1,"lodash/defaults":139}],179:[function(t,e,r){var n,o,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(t){n=a}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(t){o=s}}();var u,l=[],f=!1,h=-1;function p(){f&&u&&(f=!1,u.length?l=u.concat(l):h=-1,l.length&&_())}function _(){if(!f){var t=c(p);f=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,f=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new d(t,e)),1!==l.length||f||c(_)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],180:[function(t,P,I){(function(F){!function(t){var e="object"==typeof I&&I&&!I.nodeType&&I,r="object"==typeof P&&P&&!P.nodeType&&P,n="object"==typeof F&&F;n.global!==n&&n.window!==n&&n.self!==n||(t=n);var o,i,y=2147483647,g=36,m=1,b=26,a=38,s=700,j=72,w=128,x="-",c=/^xn--/,u=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=g-m,C=Math.floor,k=String.fromCharCode;function O(t){throw new RangeError(f[t])}function p(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function _(t,e){var r=t.split("@"),n="";return 1<r.length&&(n=r[0]+"@",t=r[1]),n+p((t=t.replace(l,".")).split("."),e).join(".")}function T(t){for(var e,r,n=[],o=0,i=t.length;o<i;)55296<=(e=t.charCodeAt(o++))&&e<=56319&&o<i?56320==(64512&(r=t.charCodeAt(o++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--):n.push(e);return n}function S(t){return p(t,function(t){var e="";return 65535<t&&(e+=k((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=k(t)}).join("")}function A(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function E(t,e,r){var n=0;for(t=r?C(t/s):t>>1,t+=C(t/e);h*b>>1<t;n+=g)t=C(t/h);return C(n+(h+1)*t/(t+a))}function d(t){var e,r,n,o,i,a,s,c,u,l,f,h=[],p=t.length,_=0,d=w,v=j;for((r=t.lastIndexOf(x))<0&&(r=0),n=0;n<r;++n)128<=t.charCodeAt(n)&&O("not-basic"),h.push(t.charCodeAt(n));for(o=0<r?r+1:0;o<p;){for(i=_,a=1,s=g;p<=o&&O("invalid-input"),f=t.charCodeAt(o++),(g<=(c=f-48<10?f-22:f-65<26?f-65:f-97<26?f-97:g)||c>C((y-_)/a))&&O("overflow"),_+=c*a,!(c<(u=s<=v?m:v+b<=s?b:s-v));s+=g)a>C(y/(l=g-u))&&O("overflow"),a*=l;v=E(_-i,e=h.length+1,0==i),C(_/e)>y-d&&O("overflow"),d+=C(_/e),_%=e,h.splice(_++,0,d)}return S(h)}function v(t){var e,r,n,o,i,a,s,c,u,l,f,h,p,_,d,v=[];for(h=(t=T(t)).length,e=w,i=j,a=r=0;a<h;++a)(f=t[a])<128&&v.push(k(f));for(n=o=v.length,o&&v.push(x);n<h;){for(s=y,a=0;a<h;++a)e<=(f=t[a])&&f<s&&(s=f);for(s-e>C((y-r)/(p=n+1))&&O("overflow"),r+=(s-e)*p,e=s,a=0;a<h;++a)if((f=t[a])<e&&++r>y&&O("overflow"),f==e){for(c=r,u=g;!(c<(l=u<=i?m:i+b<=u?b:u-i));u+=g)d=c-l,_=g-l,v.push(k(A(l+d%_,0))),c=C(d/_);v.push(k(A(c,0))),i=E(r,p,n==o),r=0,++n}++r,++e}return v.join("")}if(o={version:"1.4.1",ucs2:{decode:T,encode:S},decode:d,encode:v,toASCII:function(t){return _(t,function(t){return u.test(t)?"xn--"+v(t):t})},toUnicode:function(t){return _(t,function(t){return c.test(t)?d(t.slice(4).toLowerCase()):t})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return o});else if(e&&r)if(P.exports==e)r.exports=o;else for(i in o)o.hasOwnProperty(i)&&(e[i]=o[i]);else t.punycode=o}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],181:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){e=e||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var i=/\+/g;t=t.split(e);var a=1e3;n&&"number"==typeof n.maxKeys&&(a=n.maxKeys);var s,c,u=t.length;0<a&&a<u&&(u=a);for(var l=0;l<u;++l){var f,h,p,_,d=t[l].replace(i,"%20"),v=d.indexOf(r);0<=v?(f=d.substr(0,v),h=d.substr(v+1)):(f=d,h=""),p=decodeURIComponent(f),_=decodeURIComponent(h),s=o,c=p,Object.prototype.hasOwnProperty.call(s,c)?y(o[p])?o[p].push(_):o[p]=[o[p],_]:o[p]=_}return o};var y=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],182:[function(t,e,r){"use strict";var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(r,n,o,t){return n=n||"&",o=o||"=",null===r&&(r=void 0),"object"==typeof r?s(c(r),function(t){var e=encodeURIComponent(i(t))+o;return a(r[t])?s(r[t],function(t){return e+encodeURIComponent(i(t))}).join(n):e+encodeURIComponent(i(r[t]))}).join(n):t?encodeURIComponent(i(t))+o+encodeURIComponent(i(r)):""};var a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function s(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var c=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},{}],183:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":181,"./encode":182}],184:[function(t,e,n){var o=t("process/browser.js").nextTick,r=Function.prototype.apply,i=Array.prototype.slice,a={},s=0;function c(t,e){this._id=t,this._clearFn=e}n.setTimeout=function(){return new c(r.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new c(r.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n.setImmediate="function"==typeof setImmediate?setImmediate:function(t){var e=s++,r=!(arguments.length<2)&&i.call(arguments,1);return a[e]=!0,o(function(){a[e]&&(r?t.apply(null,r):t.call(null),n.clearImmediate(e))}),e},n.clearImmediate="function"==typeof clearImmediate?clearImmediate:function(t){delete a[t]}},{"process/browser.js":179}],185:[function(t,e,r){"use strict";var I=t("punycode"),R=t("./util");function T(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}r.parse=i,r.resolve=function(t,e){return i(t,!1,!0).resolve(e)},r.resolveObject=function(t,e){return t?i(t,!1,!0).resolveObject(e):e},r.format=function(t){R.isString(t)&&(t=i(t));return t instanceof T?t.format():T.prototype.format.call(t)},r.Url=T;var L=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,D=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,o=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),M=["'"].concat(o),U=["%","/","?",";","#"].concat(M),q=["/","?","#"],V=/^[+a-z0-9A-Z_-]{0,63}$/,N=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,B={javascript:!0,"javascript:":!0},H={javascript:!0,"javascript:":!0},z={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},G=t("querystring");function i(t,e,r){if(t&&R.isObject(t)&&t instanceof T)return t;var n=new T;return n.parse(t,e,r),n}T.prototype.parse=function(t,e,r){if(!R.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),o=-1!==n&&n<t.indexOf("#")?"?":"#",i=t.split(o);i[0]=i[0].replace(/\\/g,"/");var a=t=i.join(o);if(a=a.trim(),!r&&1===t.split("#").length){var s=D.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=e?G.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=L.exec(a);if(c){var u=(c=c[0]).toLowerCase();this.protocol=u,a=a.substr(c.length)}if(r||c||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===a.substr(0,2);!l||c&&H[c]||(a=a.substr(2),this.slashes=!0)}if(!H[c]&&(l||c&&!z[c])){for(var f,h,p=-1,_=0;_<q.length;_++){-1!==(d=a.indexOf(q[_]))&&(-1===p||d<p)&&(p=d)}-1!==(h=-1===p?a.lastIndexOf("@"):a.lastIndexOf("@",p))&&(f=a.slice(0,h),a=a.slice(h+1),this.auth=decodeURIComponent(f)),p=-1;for(_=0;_<U.length;_++){var d;-1!==(d=a.indexOf(U[_]))&&(-1===p||d<p)&&(p=d)}-1===p&&(p=a.length),this.host=a.slice(0,p),a=a.slice(p),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var y=this.hostname.split(/\./),g=(_=0,y.length);_<g;_++){var m=y[_];if(m&&!m.match(V)){for(var b="",j=0,w=m.length;j<w;j++)127<m.charCodeAt(j)?b+="x":b+=m[j];if(!b.match(V)){var x=y.slice(0,_),C=y.slice(_+1),k=m.match(N);k&&(x.push(k[1]),C.unshift(k[2])),C.length&&(a="/"+C.join(".")+a),this.hostname=x.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=I.toASCII(this.hostname));var O=this.port?":"+this.port:"",T=this.hostname||"";this.host=T+O,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!B[u])for(_=0,g=M.length;_<g;_++){var S=M[_];if(-1!==a.indexOf(S)){var A=encodeURIComponent(S);A===S&&(A=escape(S)),a=a.split(S).join(A)}}var E=a.indexOf("#");-1!==E&&(this.hash=a.substr(E),a=a.slice(0,E));var F=a.indexOf("?");if(-1!==F?(this.search=a.substr(F),this.query=a.substr(F+1),e&&(this.query=G.parse(this.query)),a=a.slice(0,F)):e&&(this.search="",this.query={}),a&&(this.pathname=a),z[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){O=this.pathname||"";var P=this.search||"";this.path=O+P}return this.href=this.format(),this},T.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&R.isObject(this.query)&&Object.keys(this.query).length&&(i=G.stringify(this.query));var a=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||z[e])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+n},T.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},T.prototype.resolveObject=function(t){if(R.isString(t)){var e=new T;e.parse(t,!1,!0),t=e}for(var r=new T,n=Object.keys(this),o=0;o<n.length;o++){var i=n[o];r[i]=this[i]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),s=0;s<a.length;s++){var c=a[s];"protocol"!==c&&(r[c]=t[c])}return z[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!z[t.protocol]){for(var u=Object.keys(t),l=0;l<u.length;l++){var f=u[l];r[f]=t[f]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||H[t.protocol])r.pathname=t.pathname;else{for(var h=(t.pathname||"").split("/");h.length&&!(t.host=h.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),r.pathname=h.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var p=r.pathname||"",_=r.search||"";r.path=p+_}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var d=r.pathname&&"/"===r.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),y=v||d||r.host&&t.pathname,g=y,m=r.pathname&&r.pathname.split("/")||[],b=(h=t.pathname&&t.pathname.split("/")||[],r.protocol&&!z[r.protocol]);if(b&&(r.hostname="",r.port=null,r.host&&(""===m[0]?m[0]=r.host:m.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===h[0]?h[0]=t.host:h.unshift(t.host)),t.host=null),y=y&&(""===h[0]||""===m[0])),v)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,m=h;else if(h.length)m||(m=[]),m.pop(),m=m.concat(h),r.search=t.search,r.query=t.query;else if(!R.isNullOrUndefined(t.search)){if(b)r.hostname=r.host=m.shift(),(k=!!(r.host&&0<r.host.indexOf("@"))&&r.host.split("@"))&&(r.auth=k.shift(),r.host=r.hostname=k.shift());return r.search=t.search,r.query=t.query,R.isNull(r.pathname)&&R.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!m.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var j=m.slice(-1)[0],w=(r.host||t.host||1<m.length)&&("."===j||".."===j)||""===j,x=0,C=m.length;0<=C;C--)"."===(j=m[C])?m.splice(C,1):".."===j?(m.splice(C,1),x++):x&&(m.splice(C,1),x--);if(!y&&!g)for(;x--;x)m.unshift("..");!y||""===m[0]||m[0]&&"/"===m[0].charAt(0)||m.unshift(""),w&&"/"!==m.join("/").substr(-1)&&m.push("");var k,O=""===m[0]||m[0]&&"/"===m[0].charAt(0);b&&(r.hostname=r.host=O?"":m.length?m.shift():"",(k=!!(r.host&&0<r.host.indexOf("@"))&&r.host.split("@"))&&(r.auth=k.shift(),r.host=r.hostname=k.shift()));return(y=y||r.host&&m.length)&&!O&&m.unshift(""),m.length?r.pathname=m.join("/"):(r.pathname=null,r.path=null),R.isNull(r.pathname)&&R.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},T.prototype.parseHost=function(){var t=this.host,e=n.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":186,punycode:180,querystring:183}],186:[function(t,e,r){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],187:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getAccessToken=r.initAuthorise=void 0;var n,o=t("./_config.js"),i=(n=o)&&n.__esModule?n:{default:n};r.initAuthorise=function(){var t="https://accounts.spotify.com/authorize?client_id="+i.default.client_id+"&response_type=token&redirect_uri="+window.location.href+"&state="+Math.random().toString(23).substring(4)+"&scope=user-read-currently-playing";window.location.replace(t)},r.getAccessToken=function(t){var e="",r=location.hash.substring(1).split("&")[0].split("=");decodeURIComponent(r[1]);return r[0]===t&&(e=decodeURIComponent(r[1])),e}},{"./_config.js":188}],188:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={base_url:"https://api.spotify.com/v1/",client_id:"385cffdc69174a06b18913ccba3998b3",client_secret:"8e91bd07bb47444395dc224ef9df1fd4",user_token:"",connectDiv:document.getElementById("auth"),nowPlayingDiv:document.getElementById("nowPlaying"),backgroundDiv:document.getElementById("background"),idleDiv:document.getElementById("idle")};r.default=n},{}],189:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getNowPlaying=void 0;var a=o(t("./_config.js")),n=t("./_auth.js"),s=o(t("./_vibrant.js"));function o(t){return t&&t.__esModule?t:{default:t}}var i=function(t){a.default.nowPlayingDiv.classList.contains("inactive")&&(a.default.idleDiv.classList.remove("active"),a.default.idleDiv.classList.add("inactive"),a.default.nowPlayingDiv.classList.remove("inactive"),a.default.nowPlayingDiv.classList.add("active"),a.default.backgroundDiv.classList.add("song-active"));var e=localStorage.getItem("SpotifyTrackID"),r=t.item.id;if(null==e||e!=r){localStorage.setItem("SpotifyTrackID",t.item.id);var n=[];for(var o in t.item.artists)t.item.artists.hasOwnProperty(o)&&n.push(t.item.artists[o][["name"]]);var i=n.join(", ");document.getElementById("artistName").innerHTML=i,document.getElementById("trackName").innerHTML=t.item.name,document.getElementById("artwork").src=t.item.album.images[0].url,a.default.backgroundDiv.classList.add("song-active"),(0,s.default)()}},c=function(){a.default.backgroundDiv.getAttribute("style")&&(a.default.backgroundDiv.style=""),a.default.nowPlayingDiv.classList.remove("active"),a.default.nowPlayingDiv.classList.add("inactive"),a.default.backgroundDiv.classList.remove("song-active"),a.default.idleDiv.classList.remove("inactive"),a.default.idleDiv.classList.add("active"),localStorage.clear()};r.getNowPlaying=function(){1==performance.navigation.type&&localStorage.clear();var t=a.default.base_url,e=(0,n.getAccessToken)("access_token"),r=new Request(t+"me/player/currently-playing",{method:"get",headers:new Headers({Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e})});setInterval(function(){fetch(r).then(function(t){switch(t.status){case 401:(0,n.initAuthorise)()}if(t.ok)return Promise.resolve(t);throw Error(t.statusText)}).then(function(t){return t.json()}).then(function(t){!0===t.is_playing?i(t):c()}).catch(function(t){console.log(t)})},3800)}},{"./_auth.js":187,"./_config.js":188,"./_vibrant.js":192}],190:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=s(t("./_config.js")),o=t("./_auth.js"),i=s(t("./_initConnect.js")),a=t("./_getNowPlaying.js");function s(t){return t&&t.__esModule?t:{default:t}}r.default=function(){(0,o.getAccessToken)("access_token")?(document.body.classList.add("connected"),n.default.connectDiv.classList.remove("active"),n.default.connectDiv.classList.add("inactive"),n.default.nowPlayingDiv.classList.remove("inactive"),n.default.nowPlayingDiv.classList.add("active"),(0,a.getNowPlaying)()):(document.body.classList.remove("connected"),(0,i.default)())}},{"./_auth.js":187,"./_config.js":188,"./_getNowPlaying.js":189,"./_initConnect.js":191}],191:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=t("./_config.js"),i=(n=o)&&n.__esModule?n:{default:n},a=t("./_auth.js");r.default=function(){var t=document.getElementById("connect");i.default.connectDiv.classList.remove("inactive"),i.default.connectDiv.classList.add("active"),i.default.nowPlayingDiv.classList.remove("active"),i.default.nowPlayingDiv.classList.add("inactive"),t.addEventListener("click",function(){localStorage.clear(),(0,a.initAuthorise)()},!1)}},{"./_auth.js":187,"./_config.js":188}],192:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}}(t("node-vibrant")),o=t("timers");r.default=function(){(0,o.setTimeout)(function(){var t=document.getElementById("artwork").src,i=document.getElementById("background");""!=t&&n.from(t).getSwatches(function(t,e){var r=[];for(var n in e)e.hasOwnProperty(n)&&null!=e[n]&&r.push({color:e[n].getHex(),text:e[n].getTitleTextColor()});var o=r[Math.floor(Math.random()*r.length)];i.style.backgroundColor=o.color,i.style.color=o.text})},250)}},{"node-vibrant":164,timers:184}],193:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),i=t("./_init.js"),a=(n=i)&&n.__esModule?n:{default:n};var s=function(){function e(){var t=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),document.addEventListener("DOMContentLoaded",function(){return t.domReady()})}return o(e,[{key:"domReady",value:function(){(0,a.default)()}}]),e}();new(r.default=s)},{"./_init.js":190}]},{},[193]);
//# sourceMappingURL=app.min.js.map
